(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{X3zk:function(e,o,n){"use strict";n.r(o),n.d(o,"LoginPageModule",(function(){return y}));var t=n("ofXK"),i=n("3Pt+"),a=n("TEn/"),s=n("tyNb"),r=n("mrSG"),c=n("fXoL"),l=n("J/xi"),b=n("on2l");let d=(()=>{class e{constructor(e,o,n){this.modalController=e,this.notificacionService=o,this.usuarioService=n,this.disabledBtn=!1,this.data={nickname:""}}ngOnInit(){}closeModal(){this.modalController.dismiss()}saveChanges(){console.log("RECOVERY"),this.validarCampos()&&(console.log("RECOVERY"),this.recovery())}validarCampos(){return!!this.data.nickname||(this.notificacionService.presentToast("El nombre de usuario o correo es requerido."),!1)}recovery(){this.usuarioService.recovery(this.data).subscribe(e=>{console.log(e),this.notificacionService.presentAlert("Recuperaci\xf3n de Contrase\xf1a","Hemos enviado la nueva contrase\xf1a a su correo: "+e.correo),this.disabledBtn=!1,this.closeModal()},e=>{this.notificacionService.presentToast("Su usuario no esta registrado en esta aplicacion."),this.disabledBtn=!1})}}return e.\u0275fac=function(o){return new(o||e)(c.Jb(a.U),c.Jb(l.a),c.Jb(b.a))},e.\u0275cmp=c.Db({type:e,selectors:[["app-modal-reset"]],decls:21,vars:3,consts:[["translucent","true"],["slot","end"],[3,"click"],["slot","icon-only","name","close-circle-outline"],[3,"fullscreen"],["collapse","condense"],["size","large"],[3,"ngSubmit"],["position","floating"],["name","person-outline"],["type","text","name","nickname","required","true",3,"ngModel","ngModelChange"],["color","primary","expand","block","type","submit",3,"disabled"],["name","save-outline","slot","start"]],template:function(e,o){1&e&&(c.Mb(0,"ion-header",0),c.Mb(1,"ion-toolbar"),c.Mb(2,"ion-title"),c.ic(3,"Recuperaci\xf3n"),c.Lb(),c.Mb(4,"ion-buttons",1),c.Mb(5,"ion-button",2),c.Ub("click",(function(){return o.closeModal()})),c.Kb(6,"ion-icon",3),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Mb(7,"ion-content",4),c.Mb(8,"ion-header",5),c.Mb(9,"ion-toolbar"),c.Mb(10,"ion-title",6),c.ic(11,"Recuperaci\xf3n"),c.Lb(),c.Lb(),c.Lb(),c.Mb(12,"form",7),c.Ub("ngSubmit",(function(){return o.saveChanges()})),c.Mb(13,"ion-item"),c.Mb(14,"ion-label",8),c.Kb(15,"ion-icon",9),c.ic(16," Usuario o Correo Eletr\xf3nico: "),c.Lb(),c.Mb(17,"ion-input",10),c.Ub("ngModelChange",(function(e){return o.data.nickname=e})),c.Lb(),c.Lb(),c.Mb(18,"ion-button",11),c.Kb(19,"ion-icon",12),c.ic(20," Recuperar Contrase\xf1a "),c.Lb(),c.Lb(),c.Lb()),2&e&&(c.zb(7),c.bc("fullscreen",!0),c.zb(10),c.bc("ngModel",o.data.nickname),c.zb(1),c.bc("disabled",o.disabledBtn))},directives:[a.t,a.Q,a.P,a.h,a.g,a.u,a.o,i.j,i.f,i.g,a.w,a.y,a.v,a.ab,i.i,i.e,i.h],styles:["ion-content[_ngcontent-%COMP%]{--padding-start:15px;--padding-end:15px}"]}),e})();function u(e,o){if(1&e){const e=c.Nb();c.Mb(0,"ion-icon",27),c.Ub("click",(function(){return c.ec(e),c.Wb().togglePassword()})),c.Lb()}}function p(e,o){if(1&e){const e=c.Nb();c.Mb(0,"ion-icon",28),c.Ub("click",(function(){return c.ec(e),c.Wb().togglePassword()})),c.Lb()}}function g(e,o){if(1&e){const e=c.Nb();c.Mb(0,"ion-icon",27),c.Ub("click",(function(){return c.ec(e),c.Wb().togglePassword2()})),c.Lb()}}function h(e,o){if(1&e){const e=c.Nb();c.Mb(0,"ion-icon",28),c.Ub("click",(function(){return c.ec(e),c.Wb().togglePassword2()})),c.Lb()}}let m=(()=>{class e{constructor(e,o,n){this.modalController=e,this.notificacionService=o,this.usuarioService=n,this.disabledBtn=!1,this.passwordType="password",this.passwordShow=!1,this.passwordType2="password",this.passwordShow2=!1,this.data={nickname:"",correo:"",password:"",imagen:"",fechaNacimiento:"",passwordRepeat:"",nombre:"",apellido:"",telefono:"",usuarioTipo:2,reiniciar:!1}}ngOnInit(){}closeModal(){this.modalController.dismiss()}togglePassword(){this.passwordShow?(this.passwordShow=!1,this.passwordType="password"):(this.passwordShow=!0,this.passwordType="text")}togglePassword2(){this.passwordShow?(this.passwordShow2=!1,this.passwordType2="password"):(this.passwordShow2=!0,this.passwordType2="text")}saveChanges(){this.validarCampos()&&(this.disabledBtn=!0,this.create())}validarCampos(){if(this.data.nickname)if(this.data.correo)if(this.data.password)if(this.data.passwordRepeat)if(this.data.nombre)if(this.data.apellido)if(this.data.telefono)if(/^(?=\w*\d)(?=\w*[A-Z])(?=\w*[a-z])\S{8,50}$/.test(this.data.password)){if(this.data.password==this.data.passwordRepeat)return!0;this.notificacionService.presentToast("Las contrase\xf1as no son iguales.")}else this.notificacionService.presentAlert("Contrase\xf1a Inv\xe1lida","Debe de tener m\xednimo 8 caracteres, al menos una min\xfascula, al menos una may\xfascula al menos un d\xedgito.");else this.notificacionService.presentToast("El telefono es requerido.");else this.notificacionService.presentToast("El apellido es requerido.");else this.notificacionService.presentToast("El nombre es requerido.");else this.notificacionService.presentToast("La contrase\xf1a repetida es requerida.");else this.notificacionService.presentToast("La contrase\xf1a es requerida.");else this.notificacionService.presentToast("El correo es requerido.");else this.notificacionService.presentToast("El nombre de usuario es requerido.");return!1}create(){this.data.fechaNacimiento=this.data.fechaNacimiento.split("T")[0],this.usuarioService.create(this.data).subscribe(e=>{this.closeModal(),this.notificacionService.presentAlert("Registro","Tu usuario se ha registrado exitosamente.")},e=>{console.error(e),this.disabledBtn=!1,"400"==e.status&&this.notificacionService.presentToast("El nombre de usuario o correo electr\xf3nico ya existe.")})}}return e.\u0275fac=function(o){return new(o||e)(c.Jb(a.U),c.Jb(l.a),c.Jb(b.a))},e.\u0275cmp=c.Db({type:e,selectors:[["app-modal-registro"]],decls:60,vars:16,consts:[["translucent","true"],["slot","end"],[3,"click"],["slot","icon-only","name","close-circle-outline"],[3,"fullscreen"],["collapse","condense"],["size","large"],[3,"ngSubmit"],["position","floating"],["name","person-outline"],["type","text","name","nickname","required","true",3,"ngModel","ngModelChange"],["name","at-outline"],["type","text","name","correo","required","",3,"ngModel","ngModelChange"],["name","lock-closed-outline"],["name","password","required","",3,"type","ngModel","ngModelChange"],["name","eye-off-outline","slot","end",3,"click",4,"ngIf"],["name","eye-outline","slot","end",3,"click",4,"ngIf"],["name","passwordRepeat","required","",3,"type","ngModel","ngModelChange"],["name","information-circle-outline"],["type","text","name","nombre","required","",3,"ngModel","ngModelChange"],["type","text","name","apellido","required","",3,"ngModel","ngModelChange"],["name","phone-portrait-outline"],["type","number","name","telefono","required","",3,"ngModel","ngModelChange"],["name","calendar-outline"],["name","fechaNacimiento","display-timezone","utc","required","",3,"ngModel","ngModelChange"],["color","primary","expand","block","type","submit",3,"disabled"],["name","save-outline","slot","start"],["name","eye-off-outline","slot","end",3,"click"],["name","eye-outline","slot","end",3,"click"]],template:function(e,o){1&e&&(c.Mb(0,"ion-header",0),c.Mb(1,"ion-toolbar"),c.Mb(2,"ion-title"),c.ic(3,"Registro"),c.Lb(),c.Mb(4,"ion-buttons",1),c.Mb(5,"ion-button",2),c.Ub("click",(function(){return o.closeModal()})),c.Kb(6,"ion-icon",3),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Mb(7,"ion-content",4),c.Mb(8,"ion-header",5),c.Mb(9,"ion-toolbar"),c.Mb(10,"ion-title",6),c.ic(11,"Registro"),c.Lb(),c.Lb(),c.Lb(),c.Mb(12,"form",7),c.Ub("ngSubmit",(function(){return o.saveChanges()})),c.Mb(13,"ion-item"),c.Mb(14,"ion-label",8),c.Kb(15,"ion-icon",9),c.ic(16," Usuario: "),c.Lb(),c.Mb(17,"ion-input",10),c.Ub("ngModelChange",(function(e){return o.data.nickname=e})),c.Lb(),c.Lb(),c.Mb(18,"ion-item"),c.Mb(19,"ion-label",8),c.Kb(20,"ion-icon",11),c.ic(21," Correo Electr\xf3nico: "),c.Lb(),c.Mb(22,"ion-input",12),c.Ub("ngModelChange",(function(e){return o.data.correo=e})),c.Lb(),c.Lb(),c.Mb(23,"ion-item"),c.Mb(24,"ion-label",8),c.Kb(25,"ion-icon",13),c.ic(26," Contrase\xf1a: "),c.Lb(),c.Mb(27,"ion-input",14),c.Ub("ngModelChange",(function(e){return o.data.password=e})),c.Lb(),c.hc(28,u,1,0,"ion-icon",15),c.hc(29,p,1,0,"ion-icon",16),c.Lb(),c.Mb(30,"ion-item"),c.Mb(31,"ion-label",8),c.Kb(32,"ion-icon",13),c.ic(33," Confirmar Contrase\xf1a: "),c.Lb(),c.Mb(34,"ion-input",17),c.Ub("ngModelChange",(function(e){return o.data.passwordRepeat=e})),c.Lb(),c.hc(35,g,1,0,"ion-icon",15),c.hc(36,h,1,0,"ion-icon",16),c.Lb(),c.Mb(37,"ion-item"),c.Mb(38,"ion-label",8),c.Kb(39,"ion-icon",18),c.ic(40," Nombre: "),c.Lb(),c.Mb(41,"ion-input",19),c.Ub("ngModelChange",(function(e){return o.data.nombre=e})),c.Lb(),c.Lb(),c.Mb(42,"ion-item"),c.Mb(43,"ion-label",8),c.Kb(44,"ion-icon",18),c.ic(45," Apellido: "),c.Lb(),c.Mb(46,"ion-input",20),c.Ub("ngModelChange",(function(e){return o.data.apellido=e})),c.Lb(),c.Lb(),c.Mb(47,"ion-item"),c.Mb(48,"ion-label",8),c.Kb(49,"ion-icon",21),c.ic(50," Tel\xe9fono: "),c.Lb(),c.Mb(51,"ion-input",22),c.Ub("ngModelChange",(function(e){return o.data.telefono=e})),c.Lb(),c.Lb(),c.Mb(52,"ion-item"),c.Mb(53,"ion-label",8),c.Kb(54,"ion-icon",23),c.ic(55," Fecha de Nacimiento: "),c.Lb(),c.Mb(56,"ion-datetime",24),c.Ub("ngModelChange",(function(e){return o.data.fechaNacimiento=e})),c.Lb(),c.Lb(),c.Mb(57,"ion-button",25),c.Kb(58,"ion-icon",26),c.ic(59," Registrarme "),c.Lb(),c.Lb(),c.Lb()),2&e&&(c.zb(7),c.bc("fullscreen",!0),c.zb(10),c.bc("ngModel",o.data.nickname),c.zb(5),c.bc("ngModel",o.data.correo),c.zb(5),c.bc("type",o.passwordType)("ngModel",o.data.password),c.zb(1),c.bc("ngIf",!o.passwordShow),c.zb(1),c.bc("ngIf",o.passwordShow),c.zb(5),c.bc("type",o.passwordType2)("ngModel",o.data.passwordRepeat),c.zb(1),c.bc("ngIf",!o.passwordShow2),c.zb(1),c.bc("ngIf",o.passwordShow2),c.zb(5),c.bc("ngModel",o.data.nombre),c.zb(5),c.bc("ngModel",o.data.apellido),c.zb(5),c.bc("ngModel",o.data.telefono),c.zb(5),c.bc("ngModel",o.data.fechaNacimiento),c.zb(1),c.bc("disabled",o.disabledBtn))},directives:[a.t,a.Q,a.P,a.h,a.g,a.u,a.o,i.j,i.f,i.g,a.w,a.y,a.v,a.ab,i.i,i.e,i.h,t.i,a.X,a.p,a.Z],styles:["ion-content[_ngcontent-%COMP%]{--padding-start:15px;--padding-end:15px}"]}),e})();function f(e,o){if(1&e){const e=c.Nb();c.Mb(0,"ion-icon",20),c.Ub("click",(function(){return c.ec(e),c.Wb().togglePassword()})),c.Lb()}}function M(e,o){if(1&e){const e=c.Nb();c.Mb(0,"ion-icon",21),c.Ub("click",(function(){return c.ec(e),c.Wb().togglePassword()})),c.Lb()}}const w=[{path:"",component:(()=>{class e{constructor(e,o,n,t,i){this.router=e,this.location=o,this.usuarioService=n,this.notificacionService=t,this.modalController=i,this.disabledBtn=!1,this.passwordType="password",this.passwordShow=!1,this.data={nickname:"",password:""}}ngOnInit(){}goToRoute(e){this.router.navigate([""+e])}goToBack(){this.location.back()}togglePassword(){this.passwordShow?(this.passwordShow=!1,this.passwordType="password"):(this.passwordShow=!0,this.passwordType="text")}authentication(){this.validar()&&(this.disabledBtn=!0,this.auth())}validar(){if(this.data.nickname){if(this.data.password)return!0;this.notificacionService.presentToast("La contrase\xf1a es requerida.")}else this.notificacionService.presentToast("El usuario es requerido.");return!1}auth(){this.usuarioService.login(this.data).subscribe(e=>{console.log(e),localStorage.setItem("cart",JSON.stringify([])),localStorage.setItem("currentNickname",e.nickname),localStorage.setItem("currentCorreo",e.correo),localStorage.setItem("currentId",e.id),localStorage.setItem("currentImagen",e.imagen),localStorage.setItem("currentNombre",e.nombre),localStorage.setItem("currentApellido",e.apellido),localStorage.setItem("currentEstado",e.estado),this.goToRoute("cliente/categoria"),1==e.usuarioTipo&&localStorage.setItem("currentType","Administrador"),this.disabledBtn=!1},e=>{400==e.error.status?this.notificacionService.presentToast("Usuario o contrase\xf1a incorrectos."):404==e.error.status&&this.notificacionService.presentToast("Su usuario no esta registrado en esta aplicacion."),this.disabledBtn=!1})}presentModalRegistro(){return Object(r.a)(this,void 0,void 0,(function*(){const e=yield this.modalController.create({component:m});return e.onDidDismiss().then(e=>{}),yield e.present()}))}presentModalReset(){return Object(r.a)(this,void 0,void 0,(function*(){const e=yield this.modalController.create({component:d});return e.onDidDismiss().then(e=>{}),yield e.present()}))}}return e.\u0275fac=function(o){return new(o||e)(c.Jb(s.g),c.Jb(t.f),c.Jb(b.a),c.Jb(l.a),c.Jb(a.U))},e.\u0275cmp=c.Db({type:e,selectors:[["app-login"]],decls:34,vars:7,consts:[["translucent","true"],[3,"fullscreen"],["collapse","condense"],["size","large"],[2,"width","100%","height","350px"],[1,"container"],["src","https://res.cloudinary.com/devgea-s-a/image/upload/v1594950613/Finca%20Cienaguilla/mkdr6jfwkclzdzubuuwb.png",1,"img-center"],[3,"ngSubmit"],["position","floating"],["name","person-outline"],["type","text","name","nickname","required","true",3,"ngModel","ngModelChange"],["name","lock-closed-outline"],["name","password","required","true",3,"type","ngModel","ngModelChange"],["name","eye-off-outline","slot","end",3,"click",4,"ngIf"],["name","eye-outline","slot","end",3,"click",4,"ngIf"],["color","primary","expand","block","type","submit",3,"disabled"],["name","log-out-outline","slot","start"],["color","primary","expand","block","fill","clear","type","button",3,"click"],["name","lock-open-outline","slot","start"],["name","person-add-outline","slot","start"],["name","eye-off-outline","slot","end",3,"click"],["name","eye-outline","slot","end",3,"click"]],template:function(e,o){1&e&&(c.Mb(0,"ion-header",0),c.Mb(1,"ion-toolbar"),c.Mb(2,"ion-title"),c.ic(3,"Iniciar Sesi\xf3n"),c.Lb(),c.Lb(),c.Lb(),c.Mb(4,"ion-content",1),c.Mb(5,"ion-header",2),c.Mb(6,"ion-toolbar"),c.Mb(7,"ion-title",3),c.ic(8,"Iniciar Sesi\xf3n"),c.Lb(),c.Lb(),c.Lb(),c.Mb(9,"div",4),c.Mb(10,"div",5),c.Kb(11,"img",6),c.Lb(),c.Lb(),c.Mb(12,"form",7),c.Ub("ngSubmit",(function(){return o.authentication()})),c.Mb(13,"ion-item"),c.Mb(14,"ion-label",8),c.Kb(15,"ion-icon",9),c.ic(16," Usuario: "),c.Lb(),c.Mb(17,"ion-input",10),c.Ub("ngModelChange",(function(e){return o.data.nickname=e})),c.Lb(),c.Lb(),c.Mb(18,"ion-item"),c.Mb(19,"ion-label",8),c.Kb(20,"ion-icon",11),c.ic(21," Contrase\xf1a: "),c.Lb(),c.Mb(22,"ion-input",12),c.Ub("ngModelChange",(function(e){return o.data.password=e})),c.Lb(),c.hc(23,f,1,0,"ion-icon",13),c.hc(24,M,1,0,"ion-icon",14),c.Lb(),c.Mb(25,"ion-button",15),c.Kb(26,"ion-icon",16),c.ic(27," Iniciar Sesi\xf3n "),c.Lb(),c.Lb(),c.Mb(28,"ion-button",17),c.Ub("click",(function(){return o.presentModalReset()})),c.Kb(29,"ion-icon",18),c.ic(30," \xbfOlvidaste tu Contrase\xf1a? "),c.Lb(),c.Mb(31,"ion-button",17),c.Ub("click",(function(){return o.presentModalRegistro()})),c.Kb(32,"ion-icon",19),c.ic(33," Crear Nueva Cuenta "),c.Lb(),c.Lb()),2&e&&(c.zb(4),c.bc("fullscreen",!0),c.zb(13),c.bc("ngModel",o.data.nickname),c.zb(5),c.bc("type",o.passwordType)("ngModel",o.data.password),c.zb(1),c.bc("ngIf",!o.passwordShow),c.zb(1),c.bc("ngIf",o.passwordShow),c.zb(1),c.bc("disabled",o.disabledBtn))},directives:[a.t,a.Q,a.P,a.o,i.j,i.f,i.g,a.w,a.y,a.u,a.v,a.ab,i.i,i.e,i.h,t.i,a.g],styles:["ion-footer[_ngcontent-%COMP%]{--background:transparent}.item.item-trns[_ngcontent-%COMP%]{border-color:transparent;background-color:rgba(0,0,0,.5);color:#fff;border-radius:30px}.grid-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto auto}.grid-item[_ngcontent-%COMP%]{padding:0;text-align:center}ion-content[_ngcontent-%COMP%]{--padding-start:15px;--padding-end:15px}"]}),e})()}];let L=(()=>{class e{}return e.\u0275mod=c.Hb({type:e}),e.\u0275inj=c.Gb({factory:function(o){return new(o||e)},imports:[[s.i.forChild(w)],s.i]}),e})(),y=(()=>{class e{}return e.\u0275mod=c.Hb({type:e}),e.\u0275inj=c.Gb({factory:function(o){return new(o||e)},imports:[[t.b,i.a,a.R,L]]}),e})()}}]);