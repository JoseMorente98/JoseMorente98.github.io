(window.webpackJsonp=window.webpackJsonp||[]).push([[27],{"/l/o":function(e,t,i){"use strict";i.r(t),i.d(t,"DireccionPageModule",(function(){return f}));var o=i("ofXK"),n=i("3Pt+"),a=i("TEn/"),r=i("tyNb"),l=i("mrSG"),s=i("fXoL"),c=i("J/xi"),d=i("ba22"),b=i("Bfh1");function p(e,t){if(1&e){const e=s.Nb();s.Mb(0,"ion-item",20),s.Ub("click",(function(){s.ec(e);const i=t.$implicit;return s.Wb().selectSearchResult(i)})),s.ic(1),s.Lb()}if(2&e){const e=t.$implicit;s.zb(1),s.kc(" ",e.description," ")}}let u=(()=>{class e{constructor(e,t,i,o,n,a){this.modalController=e,this.notificacionService=t,this.direccionService=i,this.navParams=o,this.geolocation=n,this.zone=a,this.disabledBtn=!1,this.data={id:"",direccion:"",descripcion:"",telefono:"",longitud:0,latitud:0,usuario:2}}ngOnInit(){this.GoogleAutocomplete=new google.maps.places.AutocompleteService,this.directionsService=new google.maps.DirectionsService,this.directionsDisplay=new google.maps.DirectionsRenderer,this.autocomplete={input:""},this.autocompleteItems=[],this.geocoder=new google.maps.Geocoder,this.data.id=this.navParams.get("value"),this.data.id?this.getSingle(+this.data.id):this.getPosition()}closeModal(e){this.modalController.dismiss(e)}getPosition(){this.geolocation.getCurrentPosition().then(e=>{this.data.latitud=+e.coords.latitude,this.data.longitud=+e.coords.longitude,this.getMap(e.coords.latitude,e.coords.longitude)}).catch(e=>{})}getMap(e,t){let i=e,o=t;this.data.latitud=+i,this.data.longitud=+o;let n=document.getElementById("map"),a=new google.maps.LatLng({lat:i,lng:o});var r;this.map=new google.maps.Map(n,{center:a,zoom:17,styles:[{elementType:"geometry",stylers:[{color:"#1d2c4d"}]},{elementType:"labels.text.fill",stylers:[{color:"#8ec3b9"}]},{elementType:"labels.text.stroke",stylers:[{color:"#1a3646"}]},{featureType:"administrative.country",elementType:"geometry.stroke",stylers:[{color:"#4b6878"}]},{featureType:"administrative.land_parcel",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"administrative.land_parcel",elementType:"labels.text.fill",stylers:[{color:"#64779e"}]},{featureType:"administrative.province",elementType:"geometry.stroke",stylers:[{color:"#4b6878"}]},{featureType:"landscape.man_made",elementType:"geometry.stroke",stylers:[{color:"#334e87"}]},{featureType:"landscape.natural",elementType:"geometry",stylers:[{color:"#023e58"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#283d6a"}]},{featureType:"poi",elementType:"labels.text",stylers:[{visibility:"off"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#6f9ba5"}]},{featureType:"poi",elementType:"labels.text.stroke",stylers:[{color:"#1d2c4d"}]},{featureType:"poi.business",stylers:[{visibility:"off"}]},{featureType:"poi.park",elementType:"geometry.fill",stylers:[{color:"#023e58"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#3C7680"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#304a7d"}]},{featureType:"road",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#98a5be"}]},{featureType:"road",elementType:"labels.text.stroke",stylers:[{color:"#1d2c4d"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#2c6675"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#255763"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#b0d5ce"}]},{featureType:"road.highway",elementType:"labels.text.stroke",stylers:[{color:"#023e58"}]},{featureType:"road.local",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"transit",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"labels.text.fill",stylers:[{color:"#98a5be"}]},{featureType:"transit",elementType:"labels.text.stroke",stylers:[{color:"#1d2c4d"}]},{featureType:"transit.line",elementType:"geometry.fill",stylers:[{color:"#283d6a"}]},{featureType:"transit.station",elementType:"geometry",stylers:[{color:"#3a4762"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#0e1626"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#4e6d70"}]}]}),r=new google.maps.Marker({map:this.map,draggable:!0,animation:google.maps.Animation.DROP,position:a}),google.maps.event.addListener(r,"dragend",e=>{this.data.latitud=e.latLng.lat(),this.data.longitud=e.latLng.lng()})}getSingle(e){this.direccionService.getSingle(e).subscribe(e=>{this.data=e,this.strImage=e.imagen,this.getMap(e.latitud,e.longitud)},e=>{})}saveChanges(){this.validarCampos()&&(this.disabledBtn=!0,this.data.id?this.update():this.create())}validarCampos(){if(this.data.direccion)if(this.data.descripcion){if(this.data.telefono)return!0;this.notificacionService.presentToast("El telefono es requerido.")}else this.notificacionService.presentToast("La descripci\xf3n es requerida.");else this.notificacionService.presentToast("La direcci\xf3n es requerida.");return!1}create(){this.direccionService.create(this.data).subscribe(e=>{this.closeModal(e),this.notificacionService.presentAlert("Direcci\xf3n Agregada","La direcci\xf3n se ha registrado exitosamente.")},e=>{this.notificacionService.presentToast("Lo sentimos, ha ocurrido un error intenta m\xe1s tarde.")})}update(){this.direccionService.update(this.data).subscribe(e=>{this.closeModal(e),this.notificacionService.presentAlert("Direcci\xf3n Actualizada","La direcci\xf3n se ha actualizados exitosamente.")},e=>{this.notificacionService.presentToast("Lo sentimos, ha ocurrido un error intenta m\xe1s tarde.")})}updateSearchResults(){""!=this.autocomplete.input?this.GoogleAutocomplete.getPlacePredictions({input:this.autocomplete.input},(e,t)=>{this.autocompleteItems=[],this.zone.run(()=>{console.log(e),e.forEach(e=>{this.autocompleteItems.push(e)})})}):this.autocompleteItems=[]}selectSearchResult(e){this.autocompleteItems=[],this.geocoder.geocode({placeId:e.place_id},(e,t)=>{if("OK"===t&&e[0]){let t={lat:e[0].geometry.location.lat(),lng:e[0].geometry.location.lng()};this.getMap(t.lat,t.lng)}})}}return e.\u0275fac=function(t){return new(t||e)(s.Jb(a.U),s.Jb(c.a),s.Jb(d.a),s.Jb(a.W),s.Jb(b.a),s.Jb(s.z))},e.\u0275cmp=s.Db({type:e,selectors:[["app-modal-direccion"]],decls:36,vars:8,consts:[["translucent","true"],["slot","end"],[3,"click"],["slot","icon-only","name","close-circle-outline"],["placeholder","Buscar direcci\xf3n",3,"ngModel","ionInput","ngModelChange"],[3,"fullscreen"],["collapse","condense"],["size","large"],[3,"hidden"],["tappable","",3,"click",4,"ngFor","ngForOf"],["id","map",2,"height","300px","width","100%"],[3,"ngSubmit"],["position","floating"],["name","person-outline"],["type","text","name","direccion","required","true","maxlength","255",3,"ngModel","ngModelChange"],["type","text","rows","6","cols","20","name","descripcion","required","true","maxlength","255",3,"ngModel","ngModelChange"],["name","phone-portrait-outline"],["type","number","name","telefono","required","true","maxlength","255",3,"ngModel","ngModelChange"],["color","primary","expand","block","type","submit",3,"disabled"],["name","save-outline","slot","start"],["tappable","",3,"click"]],template:function(e,t){1&e&&(s.Mb(0,"ion-header",0),s.Mb(1,"ion-toolbar"),s.Mb(2,"ion-title"),s.ic(3,"Direcci\xf3n"),s.Lb(),s.Mb(4,"ion-buttons",1),s.Mb(5,"ion-button",2),s.Ub("click",(function(){return t.closeModal()})),s.Kb(6,"ion-icon",3),s.Lb(),s.Lb(),s.Lb(),s.Mb(7,"ion-toolbar"),s.Mb(8,"ion-searchbar",4),s.Ub("ionInput",(function(){return t.updateSearchResults()}))("ngModelChange",(function(e){return t.autocomplete.input=e})),s.Lb(),s.Lb(),s.Lb(),s.Mb(9,"ion-content",5),s.Mb(10,"ion-header",6),s.Mb(11,"ion-toolbar"),s.Mb(12,"ion-title",7),s.ic(13,"Direcci\xf3n"),s.Lb(),s.Lb(),s.Lb(),s.Mb(14,"ion-list",8),s.hc(15,p,2,1,"ion-item",9),s.Lb(),s.Kb(16,"div",10),s.Mb(17,"form",11),s.Ub("ngSubmit",(function(){return t.saveChanges()})),s.Mb(18,"ion-item"),s.Mb(19,"ion-label",12),s.Kb(20,"ion-icon",13),s.ic(21," Direcci\xf3n: "),s.Lb(),s.Mb(22,"ion-input",14),s.Ub("ngModelChange",(function(e){return t.data.direccion=e})),s.Lb(),s.Lb(),s.Mb(23,"ion-item"),s.Mb(24,"ion-label",12),s.Kb(25,"ion-icon",13),s.ic(26," Descripcion: "),s.Lb(),s.Mb(27,"ion-textarea",15),s.Ub("ngModelChange",(function(e){return t.data.descripcion=e})),s.Lb(),s.Lb(),s.Mb(28,"ion-item"),s.Mb(29,"ion-label",12),s.Kb(30,"ion-icon",16),s.ic(31," Tel\xe9fono: "),s.Lb(),s.Mb(32,"ion-input",17),s.Ub("ngModelChange",(function(e){return t.data.telefono=e})),s.Lb(),s.Lb(),s.Mb(33,"ion-button",18),s.Kb(34,"ion-icon",19),s.ic(35," Guardar Cambios "),s.Lb(),s.Lb(),s.Lb()),2&e&&(s.zb(8),s.bc("ngModel",t.autocomplete.input),s.zb(1),s.bc("fullscreen",!0),s.zb(5),s.bc("hidden",0==t.autocompleteItems.length),s.zb(1),s.bc("ngForOf",t.autocompleteItems),s.zb(7),s.bc("ngModel",t.data.direccion),s.zb(5),s.bc("ngModel",t.data.descripcion),s.zb(5),s.bc("ngModel",t.data.telefono),s.zb(1),s.bc("disabled",t.disabledBtn))},directives:[a.t,a.Q,a.P,a.h,a.g,a.u,a.D,a.ab,n.e,n.h,a.o,a.z,o.h,n.j,n.f,n.g,a.w,a.y,a.v,n.i,n.b,a.O,a.X],styles:["ion-content[_ngcontent-%COMP%]{--padding-start:15px;--padding-end:15px}"]}),e})();var h=i("cZdB");function m(e,t){if(1&e){const e=s.Nb();s.Mb(0,"ion-item",10),s.Ub("click",(function(){s.ec(e);const i=t.$implicit;return s.Wb().getDetalle(i)})),s.Kb(1,"ion-icon",11),s.Mb(2,"ion-label",12),s.Mb(3,"h3"),s.ic(4),s.Lb(),s.Mb(5,"p"),s.ic(6),s.Lb(),s.Lb(),s.Lb()}if(2&e){const e=t.$implicit;s.zb(4),s.jc(e.direccion),s.zb(2),s.jc(e.descripcion)}}const g=[{path:"",component:(()=>{class e{constructor(e,t,i,o,n,a,r,l){this.loadingController=e,this.notificacionService=t,this.direccionService=i,this.alertController=o,this.router=n,this.modalController=a,this.actionSheetController=r,this.location=l,this.getAll=()=>{this.notificacionService.presentLoading("Cargando..."),this.direccionService.getAll().subscribe(e=>{this.data=[],this.data=e,this.notificacionService.dismissLoading()},e=>{this.notificacionService.dismissLoading()})}}ngOnInit(){}goToRoute(e){this.router.navigate([""+e])}goToBack(){this.location.back()}ionViewDidEnter(){this.getAll()}getDetalle(e){this.presentActionSheet(e)}presentActionSheet(e){return Object(l.a)(this,void 0,void 0,(function*(){const t=yield this.actionSheetController.create({header:"Presentaciones",cssClass:"my-custom-class",buttons:[{text:"Actualizar",icon:"create-outline",handler:()=>{this.presentModal(e.id)}},{text:"Eliminar",role:"destructive",icon:"trash-outline",handler:()=>{this.presentAlert(e.id)}},{text:"Cancelar",icon:"close",role:"cancel",handler:()=>{console.log("Cancel clicked")}}]});yield t.present()}))}presentModal(e){return Object(l.a)(this,void 0,void 0,(function*(){const t=yield this.modalController.create({component:u,componentProps:{value:e}});return t.onDidDismiss().then(e=>{e.data&&this.getAll()}),yield t.present()}))}presentAlert(e){return Object(l.a)(this,void 0,void 0,(function*(){const t=yield this.alertController.create({header:"Eliminar",message:"\xbfDeseas eliminar la presentaci\xf3n?",cssClass:"my-custom-class",buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary",handler:e=>{}},{text:"Aceptar",handler:()=>{this.delete(e)}}]});yield t.present()}))}delete(e){this.direccionService.delete(e).subscribe(e=>{this.notificacionService.presentAlert("Presentaci\xf3n Eliminada","La presentaci\xf3n fue eliminada exitosamente."),this.getAll()},e=>{console})}}return e.\u0275fac=function(t){return new(t||e)(s.Jb(a.T),s.Jb(c.a),s.Jb(d.a),s.Jb(a.b),s.Jb(r.g),s.Jb(a.U),s.Jb(a.a),s.Jb(o.f))},e.\u0275cmp=s.Db({type:e,selectors:[["app-direccion"]],decls:19,vars:5,consts:[["translucent","true"],["slot","start"],["defaultHref","/cliente/categoria"],["collapse","condense"],["size","large"],[3,"ngModel","ngModelChange"],["button","",3,"click",4,"ngFor","ngForOf"],["vertical","bottom","horizontal","end","slot","fixed"],[3,"click"],["name","add-outline"],["button","",3,"click"],["slot","start","name","navigate-outline"],[1,"ion-text-wrap"]],template:function(e,t){1&e&&(s.Mb(0,"ion-header",0),s.Mb(1,"ion-toolbar"),s.Mb(2,"ion-buttons",1),s.Kb(3,"ion-back-button",2),s.Lb(),s.Mb(4,"ion-title"),s.ic(5,"Mis Direcciones"),s.Lb(),s.Lb(),s.Lb(),s.Mb(6,"ion-content"),s.Mb(7,"ion-header",3),s.Mb(8,"ion-toolbar"),s.Mb(9,"ion-title",4),s.ic(10,"Mis Direcciones"),s.Lb(),s.Lb(),s.Mb(11,"ion-toolbar"),s.Mb(12,"ion-searchbar",5),s.Ub("ngModelChange",(function(e){return t.search=e})),s.Lb(),s.Lb(),s.Lb(),s.Mb(13,"ion-list"),s.hc(14,m,7,2,"ion-item",6),s.Xb(15,"filter"),s.Lb(),s.Mb(16,"ion-fab",7),s.Mb(17,"ion-fab-button",8),s.Ub("click",(function(){return t.presentModal()})),s.Kb(18,"ion-icon",9),s.Lb(),s.Lb(),s.Lb()),2&e&&(s.zb(12),s.bc("ngModel",t.search),s.zb(2),s.bc("ngForOf",s.Yb(15,2,t.data,t.search)))},directives:[a.t,a.Q,a.h,a.e,a.f,a.P,a.o,a.D,a.ab,n.e,n.h,a.z,o.h,a.q,a.r,a.u,a.w,a.y],pipes:[h.a],styles:[""]}),e})()}];let y=(()=>{class e{}return e.\u0275mod=s.Hb({type:e}),e.\u0275inj=s.Gb({factory:function(t){return new(t||e)},imports:[[r.i.forChild(g)],r.i]}),e})(),f=(()=>{class e{}return e.\u0275mod=s.Hb({type:e}),e.\u0275inj=s.Gb({factory:function(t){return new(t||e)},imports:[[o.b,n.a,a.R,y,h.b]]}),e})()}}]);