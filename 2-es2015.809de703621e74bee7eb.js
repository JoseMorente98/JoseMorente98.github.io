(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{D6JZ:function(e,t,i){"use strict";i.r(t),i.d(t,"ProductoPageModule",(function(){return ie}));var n=i("ofXK"),o=i("3Pt+"),a=i("TEn/"),c=i("tyNb"),r=i("mrSG"),s=i("fXoL"),b=i("J/xi"),l=i("XDzg"),d=i("DgPi"),h=i("a/9d"),u=i("cZdB");function g(e,t){if(1&e){const e=s.Nb();s.Mb(0,"ion-item",11),s.Ub("click",(function(){s.ec(e);const i=t.$implicit;return s.Wb(2).getDetalle(i)})),s.Kb(1,"ion-icon",12),s.Mb(2,"ion-label",13),s.Mb(3,"h3"),s.ic(4),s.Lb(),s.Mb(5,"p"),s.ic(6),s.Lb(),s.Lb(),s.Lb()}if(2&e){const e=t.$implicit;s.zb(4),s.jc(e.nombre),s.zb(2),s.jc(e.descripcion)}}function p(e,t){if(1&e&&(s.Mb(0,"ion-list"),s.hc(1,g,7,2,"ion-item",10),s.Xb(2,"filter"),s.Lb()),2&e){const e=s.Wb();s.zb(1),s.bc("ngForOf",s.Yb(2,1,e.data,e.search))}}function m(e,t){1&e&&s.Kb(0,"img",18)}function f(e,t){if(1&e&&s.Kb(0,"img",19),2&e){const e=s.Wb(2);s.cc("src",e.strImage,s.fc)}}function M(e,t){if(1&e&&(s.Mb(0,"div",14),s.Mb(1,"div",15),s.hc(2,m,1,0,"img",16),s.hc(3,f,1,1,"img",17),s.Lb(),s.Lb()),2&e){const e=s.Wb();s.zb(2),s.bc("ngIf",!e.strImage),s.zb(1),s.bc("ngIf",e.strImage)}}function L(e,t){if(1&e){const e=s.Nb();s.Mb(0,"form",20),s.Ub("ngSubmit",(function(){return s.ec(e),s.Wb().saveChanges()})),s.Mb(1,"ion-item"),s.Mb(2,"ion-label",21),s.Kb(3,"ion-icon",22),s.ic(4," Descripcion: "),s.Lb(),s.Mb(5,"ion-textarea",23),s.Ub("ngModelChange",(function(t){return s.ec(e),s.Wb().dataForm.descripcion=t})),s.Lb(),s.Lb(),s.Mb(6,"ion-item"),s.Mb(7,"ion-label",21),s.Kb(8,"ion-icon",22),s.ic(9," Precio: "),s.Lb(),s.Mb(10,"ion-input",24),s.Ub("ngModelChange",(function(t){return s.ec(e),s.Wb().dataForm.precio=t})),s.Lb(),s.Lb(),s.Mb(11,"ion-item"),s.Mb(12,"ion-label",21),s.Kb(13,"ion-icon",22),s.ic(14," Costo: "),s.Lb(),s.Mb(15,"ion-input",25),s.Ub("ngModelChange",(function(t){return s.ec(e),s.Wb().dataForm.costo=t})),s.Lb(),s.Lb(),s.Mb(16,"ion-item"),s.Mb(17,"ion-label",21),s.Kb(18,"ion-icon",22),s.ic(19," Cantidad: "),s.Lb(),s.Mb(20,"ion-input",26),s.Ub("ngModelChange",(function(t){return s.ec(e),s.Wb().dataForm.cantidad=t})),s.Lb(),s.Lb(),s.Mb(21,"ion-button",27),s.Ub("click",(function(){return s.ec(e),s.Wb().libreria()})),s.Kb(22,"ion-icon",28),s.ic(23," Seleccionar Imagen "),s.Lb(),s.Mb(24,"ion-button",29),s.Kb(25,"ion-icon",30),s.ic(26," Guardar Cambios "),s.Lb(),s.Lb()}if(2&e){const e=s.Wb();s.zb(5),s.bc("ngModel",e.dataForm.descripcion),s.zb(5),s.bc("ngModel",e.dataForm.precio),s.zb(5),s.bc("ngModel",e.dataForm.costo),s.zb(5),s.bc("ngModel",e.dataForm.cantidad),s.zb(4),s.bc("disabled",e.disabledBtn)}}let v=(()=>{class e{constructor(e,t,i,n,o,a,c){this.loadingController=e,this.notificacionService=t,this.presentacionService=i,this.modalController=n,this.navParams=o,this.uploadFileService=a,this.camera=c,this.disabledBtn=!1,this.presentaciones=!0,this.formulario=!1,this.dataForm={id:"",producto:"",presentacion:"",descripcion:"",precio:"",costo:"",cantidad:"",imagen:""},this.getAll=()=>{this.notificacionService.presentLoading("Cargando..."),this.presentacionService.getAll().subscribe(e=>{this.data=[],this.data=e,this.notificacionService.dismissLoading()},e=>{this.notificacionService.dismissLoading()})}}ngOnInit(){this.dataForm.producto=this.navParams.get("producto"),this.dataForm.id=this.navParams.get("value"),this.dataForm.id?this.getSingle(+this.dataForm.id):this.getAll()}closeModal(e){this.modalController.dismiss(e)}getDetalle(e){console.log(e),this.presentaciones=!1,this.formulario=!0,this.dataForm.presentacion=e.id,this.dataForm.descripcion=e.nombre}saveChanges(){console.log(this.dataForm),this.dataForm.id?this.update():this.create()}create(){this.strImage&&(this.dataForm.imagen=this.strImage),this.presentacionService.createProductoPresentacion(this.dataForm).subscribe(e=>{this.closeModal(e),this.notificacionService.presentAlert("Presentaci\xf3n Agregada","La presentaci\xf3n se ha registrado exitosamente.")},e=>{this.notificacionService.presentToast("Lo sentimos, ha ocurrido un error intenta m\xe1s tarde.")})}update(){this.strImage&&(this.dataForm.imagen=this.strImage),this.presentacionService.updateProductoPresentacion(this.dataForm).subscribe(e=>{this.closeModal(e),this.notificacionService.presentAlert("Presentaci\xf3n Actualizada","La presentaci\xf3n se ha actualizado exitosamente.")},e=>{this.notificacionService.presentToast("Lo sentimos, ha ocurrido un error intenta m\xe1s tarde.")})}getSingle(e){this.presentaciones=!1,this.formulario=!0,this.presentacionService.getSinglePresentacion(e).subscribe(e=>{this.dataForm=e},e=>{})}libreria(){this.procesarImagen({quality:60,destinationType:this.camera.DestinationType.FILE_URI,encodingType:this.camera.EncodingType.JPEG,mediaType:this.camera.MediaType.PICTURE,correctOrientation:!0,sourceType:this.camera.PictureSourceType.PHOTOLIBRARY})}procesarImagen(e){this.camera.getPicture(e).then(e=>{this.strImage="https://i.pinimg.com/originals/8e/e2/12/8ee212dac057d412972e0c8cc164deee.gif",this.uploadFileService.subirImagen(e,"Ecommerce/Producto").then(e=>{this.strImage=e.secure_url}).catch(e=>{this.notificacionService.presentToast("Lo sentimos, ha ocurrido un error intenta m\xe1s tarde.")})},e=>{this.notificacionService.presentToast("Lo sentimos, servicio inhabilitado para tu dispositivo.")})}}return e.\u0275fac=function(t){return new(t||e)(s.Jb(a.T),s.Jb(b.a),s.Jb(l.a),s.Jb(a.U),s.Jb(a.W),s.Jb(d.a),s.Jb(h.a))},e.\u0275cmp=s.Db({type:e,selectors:[["app-modal-producto-presentacion"]],decls:17,vars:4,consts:[["translucent","true"],["slot","end"],[3,"click"],["slot","icon-only","name","close-circle-outline"],["collapse","condense"],["size","large"],[3,"ngModel","ngModelChange"],[4,"ngIf"],["style","width: 100%; height: 350px;",4,"ngIf"],[3,"ngSubmit",4,"ngIf"],["button","",3,"click",4,"ngFor","ngForOf"],["button","",3,"click"],["slot","start","name","albums-outline"],[1,"ion-text-wrap"],[2,"width","100%","height","350px"],[1,"container"],["class","img-center","src","https://res.cloudinary.com/devgea-s-a/image/upload/v1594950613/Finca%20Cienaguilla/mkdr6jfwkclzdzubuuwb.png",4,"ngIf"],["class","img-center",3,"src",4,"ngIf"],["src","https://res.cloudinary.com/devgea-s-a/image/upload/v1594950613/Finca%20Cienaguilla/mkdr6jfwkclzdzubuuwb.png",1,"img-center"],[1,"img-center",3,"src"],[3,"ngSubmit"],["position","floating"],["name","person-outline"],["type","text","rows","6","cols","20","name","descripcion","required","true","maxlength","255",3,"ngModel","ngModelChange"],["type","number","name","precio","required","true","maxlength","10",3,"ngModel","ngModelChange"],["type","number","name","costo","required","true","maxlength","10",3,"ngModel","ngModelChange"],["type","number","name","cantidad","required","true","maxlength","10",3,"ngModel","ngModelChange"],["color","primary","expand","block","type","button",3,"click"],["name","images-outline","slot","start"],["color","primary","expand","block","type","submit",3,"disabled"],["name","save-outline","slot","start"]],template:function(e,t){1&e&&(s.Mb(0,"ion-header",0),s.Mb(1,"ion-toolbar"),s.Mb(2,"ion-title"),s.ic(3,"Presentaci\xf3n"),s.Lb(),s.Mb(4,"ion-buttons",1),s.Mb(5,"ion-button",2),s.Ub("click",(function(){return t.closeModal()})),s.Kb(6,"ion-icon",3),s.Lb(),s.Lb(),s.Lb(),s.Lb(),s.Mb(7,"ion-content"),s.Mb(8,"ion-header",4),s.Mb(9,"ion-toolbar"),s.Mb(10,"ion-title",5),s.ic(11,"Presentaci\xf3n"),s.Lb(),s.Lb(),s.Mb(12,"ion-toolbar"),s.Mb(13,"ion-searchbar",6),s.Ub("ngModelChange",(function(e){return t.search=e})),s.Lb(),s.Lb(),s.Lb(),s.hc(14,p,3,4,"ion-list",7),s.hc(15,M,4,2,"div",8),s.hc(16,L,27,5,"form",9),s.Lb()),2&e&&(s.zb(13),s.bc("ngModel",t.search),s.zb(1),s.bc("ngIf",t.presentaciones),s.zb(1),s.bc("ngIf",t.formulario),s.zb(1),s.bc("ngIf",t.formulario))},directives:[a.t,a.Q,a.P,a.h,a.g,a.u,a.o,a.D,a.ab,o.e,o.h,n.i,a.z,n.h,a.w,a.y,o.j,o.f,o.g,a.O,o.i,o.b,a.v,a.X],pipes:[u.a],styles:["ion-content[_ngcontent-%COMP%]{--padding-start:15px;--padding-end:15px}"]}),e})();var I=i("tk/3"),C=i("z6cu"),y=i("JIr8"),z=i("BK6h");let S=(()=>{class e{constructor(e){this.http=e,this.basePath=z.a.path,this.httpOptions={headers:new I.c({"Content-Type":"application/json"})}}handleError(e){return e.error instanceof ErrorEvent?console.error("Un error ha ocurrido:",e.error.message):console.error(`Backend returned code ${e.status}, body was: `,e.error),Object(C.a)(e)}getAll(){return this.http.get(this.basePath+"productos",this.httpOptions).pipe(Object(y.a)(this.handleError))}getAllByCategoria(e){let t;return t=e?`${this.basePath}productos/categoria/${e}`:this.basePath+"productos",this.http.get(t).pipe(Object(y.a)(this.handleError))}getSingle(e){return this.http.get(`${this.basePath}productos/${e}`).pipe(Object(y.a)(this.handleError))}create(e){return this.http.post(this.basePath+"productos",e,this.httpOptions).pipe(Object(y.a)(this.handleError))}update(e){return this.http.put(`${this.basePath}productos/${e.id}`,e,this.httpOptions).pipe(Object(y.a)(this.handleError))}delete(e){return this.http.delete(`${this.basePath}productos/${e}`,this.httpOptions).pipe(Object(y.a)(this.handleError))}}return e.\u0275fac=function(t){return new(t||e)(s.Qb(I.a))},e.\u0275prov=s.Fb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var P=i("LazK");function x(e,t){1&e&&(s.Mb(0,"ion-title"),s.ic(1,"Producto"),s.Lb())}function A(e,t){1&e&&(s.Mb(0,"ion-title"),s.ic(1,"Detalle"),s.Lb())}function k(e,t){if(1&e){const e=s.Nb();s.Mb(0,"ion-toolbar"),s.Mb(1,"ion-segment",7),s.Ub("ionChange",(function(t){return s.ec(e),s.Wb(2).segmentChanged(t)})),s.Mb(2,"ion-segment-button",8),s.Mb(3,"ion-label"),s.ic(4,"Formulario"),s.Lb(),s.Lb(),s.Mb(5,"ion-segment-button",9),s.Mb(6,"ion-label"),s.ic(7,"Presentaciones"),s.Lb(),s.Lb(),s.Lb(),s.Lb()}}function T(e,t){if(1&e&&(s.Mb(0,"div"),s.hc(1,k,8,0,"ion-toolbar",1),s.Lb()),2&e){const e=s.Wb();s.zb(1),s.bc("ngIf",e.data.id)}}function F(e,t){1&e&&s.Kb(0,"img",31)}function O(e,t){if(1&e&&s.Kb(0,"img",32),2&e){const e=s.Wb(2);s.cc("src",e.strImage,s.fc)}}function W(e,t){if(1&e&&(s.Mb(0,"ion-select-option",33),s.ic(1),s.Lb()),2&e){const e=t.$implicit;s.bc("value",e.id),s.zb(1),s.jc(e.nombre)}}function U(e,t){if(1&e){const e=s.Nb();s.Mb(0,"ion-content",10),s.Mb(1,"ion-header",11),s.Mb(2,"ion-toolbar"),s.Mb(3,"ion-title",12),s.ic(4,"Producto"),s.Lb(),s.Lb(),s.Lb(),s.Mb(5,"div",13),s.Mb(6,"div",14),s.hc(7,F,1,0,"img",15),s.hc(8,O,1,1,"img",16),s.Lb(),s.Lb(),s.Mb(9,"form",17),s.Ub("ngSubmit",(function(){return s.ec(e),s.Wb().saveChanges()})),s.Mb(10,"ion-item"),s.Mb(11,"ion-label",18),s.Kb(12,"ion-icon",19),s.ic(13," Nombre: "),s.Lb(),s.Mb(14,"ion-input",20),s.Ub("ngModelChange",(function(t){return s.ec(e),s.Wb().data.nombre=t})),s.Lb(),s.Lb(),s.Mb(15,"ion-item"),s.Mb(16,"ion-label",18),s.Kb(17,"ion-icon",19),s.ic(18," Descripcion: "),s.Lb(),s.Mb(19,"ion-textarea",21),s.Ub("ngModelChange",(function(t){return s.ec(e),s.Wb().data.descripcion=t})),s.Lb(),s.Lb(),s.Mb(20,"ion-item"),s.Mb(21,"ion-label",18),s.Kb(22,"ion-icon",19),s.ic(23," Precio: "),s.Lb(),s.Mb(24,"ion-input",22),s.Ub("ngModelChange",(function(t){return s.ec(e),s.Wb().data.precio=t})),s.Lb(),s.Lb(),s.Mb(25,"ion-item"),s.Mb(26,"ion-label",18),s.Kb(27,"ion-icon",19),s.ic(28," Costo: "),s.Lb(),s.Mb(29,"ion-input",23),s.Ub("ngModelChange",(function(t){return s.ec(e),s.Wb().data.costo=t})),s.Lb(),s.Lb(),s.Mb(30,"ion-item"),s.Mb(31,"ion-label",18),s.Kb(32,"ion-icon",19),s.ic(33," Cantidad: "),s.Lb(),s.Mb(34,"ion-input",24),s.Ub("ngModelChange",(function(t){return s.ec(e),s.Wb().data.cantidad=t})),s.Lb(),s.Lb(),s.Mb(35,"ion-item"),s.Mb(36,"ion-label"),s.ic(37,"Categor\xeda"),s.Lb(),s.Mb(38,"ion-select",25),s.Ub("ngModelChange",(function(t){return s.ec(e),s.Wb().data.categoria=t})),s.hc(39,W,2,2,"ion-select-option",26),s.Lb(),s.Lb(),s.Mb(40,"ion-button",27),s.Ub("click",(function(){return s.ec(e),s.Wb().libreria()})),s.Kb(41,"ion-icon",28),s.ic(42," Seleccionar Imagen "),s.Lb(),s.Mb(43,"ion-button",29),s.Kb(44,"ion-icon",30),s.ic(45," Guardar Cambios "),s.Lb(),s.Lb(),s.Lb()}if(2&e){const e=s.Wb();s.bc("fullscreen",!0),s.zb(7),s.bc("ngIf",!e.strImage),s.zb(1),s.bc("ngIf",e.strImage),s.zb(6),s.bc("ngModel",e.data.nombre),s.zb(5),s.bc("ngModel",e.data.descripcion),s.zb(5),s.bc("ngModel",e.data.precio),s.zb(5),s.bc("ngModel",e.data.costo),s.zb(5),s.bc("ngModel",e.data.cantidad),s.zb(4),s.bc("ngModel",e.data.categoria),s.zb(1),s.bc("ngForOf",e.categorias),s.zb(4),s.bc("disabled",e.disabledBtn)}}function w(e,t){1&e&&s.Kb(0,"img",43)}function J(e,t){if(1&e&&s.Kb(0,"img",44),2&e){const e=s.Wb(2);s.cc("src",e.strImage,s.fc)}}function K(e,t){if(1&e&&(s.Mb(0,"h6",39),s.Mb(1,"strong"),s.ic(2,"Precio: "),s.Lb(),s.ic(3),s.Lb()),2&e){const e=s.Wb(2);s.zb(3),s.kc("Q ",e.data.precio," ")}}function j(e,t){if(1&e&&(s.Mb(0,"h6",39),s.Mb(1,"strong"),s.ic(2,"Cantidad: "),s.Lb(),s.ic(3),s.Lb()),2&e){const e=s.Wb(2);s.zb(3),s.kc("",e.data.cantidad," ")}}function E(e,t){if(1&e){const e=s.Nb();s.Mb(0,"ion-item",45),s.Ub("click",(function(){s.ec(e);const i=t.$implicit;return s.Wb(2).getDetalle(i)})),s.Kb(1,"ion-icon",46),s.Mb(2,"ion-label",47),s.Mb(3,"h3"),s.Mb(4,"strong"),s.ic(5,"Presentaci\xf3n: "),s.Lb(),s.ic(6),s.Lb(),s.Mb(7,"h3"),s.Mb(8,"strong"),s.ic(9,"Precio: "),s.Lb(),s.ic(10),s.Lb(),s.Mb(11,"h3"),s.Mb(12,"strong"),s.ic(13,"Cantidad: "),s.Lb(),s.ic(14),s.Lb(),s.Lb(),s.Lb()}if(2&e){const e=t.$implicit;s.zb(6),s.jc(e.presentacionNombre),s.zb(4),s.kc("Q ",e.precio,""),s.zb(4),s.jc(e.cantidad)}}function D(e,t){if(1&e){const e=s.Nb();s.Mb(0,"ion-fab",48),s.Mb(1,"ion-fab-button",3),s.Ub("click",(function(){return s.ec(e),s.Wb(2).presentModal()})),s.Kb(2,"ion-icon",49),s.Lb(),s.Lb()}}function N(e,t){if(1&e&&(s.Mb(0,"ion-content",34),s.Mb(1,"ion-header",11),s.Mb(2,"ion-toolbar"),s.Mb(3,"ion-title",12),s.ic(4,"Detalle"),s.Lb(),s.Lb(),s.Lb(),s.hc(5,w,1,0,"img",35),s.hc(6,J,1,1,"img",36),s.Mb(7,"div",37),s.Mb(8,"ion-text",38),s.Mb(9,"h3",39),s.ic(10),s.Lb(),s.Mb(11,"p",39),s.ic(12),s.Lb(),s.hc(13,K,4,1,"h6",40),s.hc(14,j,4,1,"h6",40),s.Lb(),s.Lb(),s.Mb(15,"ion-list"),s.hc(16,E,15,3,"ion-item",41),s.Xb(17,"filter"),s.Lb(),s.hc(18,D,3,0,"ion-fab",42),s.Lb()),2&e){const e=s.Wb();s.bc("fullscreen",!0),s.zb(5),s.bc("ngIf",!e.strImage),s.zb(1),s.bc("ngIf",e.strImage),s.zb(4),s.jc(e.data.nombre),s.zb(2),s.kc(" ",e.data.descripcion," "),s.zb(1),s.bc("ngIf",0==e.presentaciones.length),s.zb(1),s.bc("ngIf",0==e.presentaciones.length),s.zb(2),s.bc("ngForOf",s.Yb(17,9,e.presentaciones,e.search)),s.zb(2),s.bc("ngIf","Administrador"==e.administratorApp)}}let $=(()=>{class e{constructor(e,t,i,n,o,a,c,r,s,b){this.modalController=e,this.camera=t,this.notificacionService=i,this.productoService=n,this.presentacionService=o,this.categoriaService=a,this.uploadFileService=c,this.navParams=r,this.actionSheetController=s,this.alertController=b,this.disabledBtn=!1,this.selectItem="form",this.presentaciones=[],this.data={id:"",nombre:"",descripcion:"",precio:"",costo:"",cantidad:"",imagen:"",categoria:null}}ngOnInit(){this.data.id=this.navParams.get("value"),this.categoria=this.navParams.get("categoria"),this.administratorApp=localStorage.getItem("currentType"),"Administrador"!=this.administratorApp&&(this.selectItem="presentacion"),this.data.id&&this.getSingle(+this.data.id),this.getAll()}segmentChanged(e){console.log("Segment changed",e),this.selectItem=e.detail.value}closeModal(e){this.modalController.dismiss(e)}getSingle(e){this.productoService.getSingle(e).subscribe(e=>{console.log(e),this.data=e,this.strImage=e.imagen,0==this.categoria&&(this.categoria=e.categoria),this.getAllPresentacion(e.id)},e=>{})}getAllPresentacion(e){this.presentacionService.getAllByProducto(e).subscribe(e=>{this.presentaciones=[],this.presentaciones=e},e=>{this.presentaciones=[]})}getAll(){this.categoriaService.getAllCategorias().subscribe(e=>{this.categorias=[],this.categorias=e,this.data.categoria=this.categoria},e=>{})}saveChanges(){this.validarCampos()&&(this.disabledBtn=!0,this.data.id?this.update():this.create())}validarCampos(){if(this.data.nombre){if(this.data.descripcion)return!0;this.notificacionService.presentToast("La descripci\xf3n es requerida.")}else this.notificacionService.presentToast("El nombre es requerido.");return!1}create(){this.strImage&&(this.data.imagen=this.strImage),this.productoService.create(this.data).subscribe(e=>{this.closeModal(e),this.notificacionService.presentAlert("Producto Agregado","El producto se ha registrado exitosamente.")},e=>{this.notificacionService.presentToast("Lo sentimos, ha ocurrido un error intenta m\xe1s tarde.")})}update(){this.strImage&&(this.data.imagen=this.strImage),this.productoService.update(this.data).subscribe(e=>{this.closeModal(e),this.notificacionService.presentAlert("Producto Actualizado","El producto se ha actualizado exitosamente.")},e=>{this.notificacionService.presentToast("Lo sentimos, ha ocurrido un error intenta m\xe1s tarde.")})}getDetalle(e){"Administrador"==this.administratorApp&&this.presentActionSheet(e)}presentActionSheet(e){return Object(r.a)(this,void 0,void 0,(function*(){const t=yield this.actionSheetController.create({header:"Presentaciones",cssClass:"my-custom-class",buttons:[{text:"Actualizar",icon:"create-outline",handler:()=>{this.presentModal(e.id)}},{text:"Eliminar",role:"destructive",icon:"trash-outline",handler:()=>{this.presentAlert(e.id)}},{text:"Cancelar",icon:"close",role:"cancel",handler:()=>{console.log("Cancel clicked")}}]});yield t.present()}))}presentAlert(e){return Object(r.a)(this,void 0,void 0,(function*(){const t=yield this.alertController.create({header:"Eliminar",message:"\xbfDeseas eliminar la presentaci\xf3n?",cssClass:"my-custom-class",buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary",handler:e=>{}},{text:"Aceptar",handler:()=>{this.delete(e)}}]});yield t.present()}))}delete(e){this.presentacionService.deleteProductoPresentacion(e).subscribe(e=>{this.notificacionService.presentAlert("Presentaci\xf3n Eliminada","La presentaci\xf3n fue eliminada exitosamente."),this.getAllPresentacion(+this.data.id)},e=>{console})}libreria(){this.procesarImagen({quality:60,destinationType:this.camera.DestinationType.FILE_URI,encodingType:this.camera.EncodingType.JPEG,mediaType:this.camera.MediaType.PICTURE,correctOrientation:!0,sourceType:this.camera.PictureSourceType.PHOTOLIBRARY})}procesarImagen(e){this.camera.getPicture(e).then(e=>{this.strImage="https://i.pinimg.com/originals/8e/e2/12/8ee212dac057d412972e0c8cc164deee.gif",this.uploadFileService.subirImagen(e,"Ecommerce/Producto").then(e=>{this.strImage=e.secure_url}).catch(e=>{this.notificacionService.presentToast("Lo sentimos, ha ocurrido un error intenta m\xe1s tarde.")})},e=>{this.notificacionService.presentToast("Lo sentimos, servicio inhabilitado para tu dispositivo.")})}presentModal(e){return Object(r.a)(this,void 0,void 0,(function*(){const t=yield this.modalController.create({component:v,componentProps:{value:e,producto:this.data.id}});return t.onDidDismiss().then(e=>{e.data&&this.getAllPresentacion(+this.data.id)}),yield t.present()}))}}return e.\u0275fac=function(t){return new(t||e)(s.Jb(a.U),s.Jb(h.a),s.Jb(b.a),s.Jb(S),s.Jb(l.a),s.Jb(P.a),s.Jb(d.a),s.Jb(a.W),s.Jb(a.a),s.Jb(a.b))},e.\u0275cmp=s.Db({type:e,selectors:[["app-modal-producto"]],decls:10,vars:5,consts:[["translucent","true"],[4,"ngIf"],["slot","end"],[3,"click"],["slot","icon-only","name","close-circle-outline"],["style","--padding-start: 15px; --padding-end: 15px;",3,"fullscreen",4,"ngIf"],[3,"fullscreen",4,"ngIf"],["value","form",3,"ionChange"],["value","form"],["value","presentacion"],[2,"--padding-start","15px","--padding-end","15px",3,"fullscreen"],["collapse","condense"],["size","large"],[2,"width","100%","height","350px"],[1,"container"],["class","img-center","src","https://res.cloudinary.com/devgea-s-a/image/upload/v1594950613/Finca%20Cienaguilla/mkdr6jfwkclzdzubuuwb.png",4,"ngIf"],["class","img-center",3,"src",4,"ngIf"],[3,"ngSubmit"],["position","floating"],["name","person-outline"],["type","text","name","nombre","required","true","maxlength","255",3,"ngModel","ngModelChange"],["type","text","rows","6","cols","20","name","descripcion","required","true","maxlength","255",3,"ngModel","ngModelChange"],["type","number","name","precio","required","true","maxlength","10",3,"ngModel","ngModelChange"],["type","number","name","costo","required","true","maxlength","10",3,"ngModel","ngModelChange"],["type","number","name","cantidad","required","true","maxlength","10",3,"ngModel","ngModelChange"],["placeholder","Selecciona una categor\xeda","name","categoria",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["color","primary","expand","block","type","button",3,"click"],["name","images-outline","slot","start"],["color","primary","expand","block","type","submit",3,"disabled"],["name","save-outline","slot","start"],["src","https://res.cloudinary.com/devgea-s-a/image/upload/v1594950613/Finca%20Cienaguilla/mkdr6jfwkclzdzubuuwb.png",1,"img-center"],[1,"img-center",3,"src"],[3,"value"],[3,"fullscreen"],["src","https://res.cloudinary.com/devgea-s-a/image/upload/v1594950613/Finca%20Cienaguilla/mkdr6jfwkclzdzubuuwb.png",4,"ngIf"],[3,"src",4,"ngIf"],[2,"text-align","center"],[2,"padding-left","15px","padding-right","15px"],[2,"margin","3px"],["style","margin: 3px;",4,"ngIf"],["button","",3,"click",4,"ngFor","ngForOf"],["vertical","bottom","horizontal","end","slot","fixed",4,"ngIf"],["src","https://res.cloudinary.com/devgea-s-a/image/upload/v1594950613/Finca%20Cienaguilla/mkdr6jfwkclzdzubuuwb.png"],[3,"src"],["button","",3,"click"],["slot","start","name","albums-outline"],[1,"ion-text-wrap"],["vertical","bottom","horizontal","end","slot","fixed"],["name","add-outline"]],template:function(e,t){1&e&&(s.Mb(0,"ion-header",0),s.Mb(1,"ion-toolbar"),s.hc(2,x,2,0,"ion-title",1),s.hc(3,A,2,0,"ion-title",1),s.Mb(4,"ion-buttons",2),s.Mb(5,"ion-button",3),s.Ub("click",(function(){return t.closeModal("123")})),s.Kb(6,"ion-icon",4),s.Lb(),s.Lb(),s.Lb(),s.hc(7,T,2,1,"div",1),s.Lb(),s.hc(8,U,46,11,"ion-content",5),s.hc(9,N,19,12,"ion-content",6)),2&e&&(s.zb(2),s.bc("ngIf","form"==t.selectItem),s.zb(1),s.bc("ngIf","presentacion"==t.selectItem),s.zb(4),s.bc("ngIf","Administrador"==t.administratorApp),s.zb(1),s.bc("ngIf","form"==t.selectItem),s.zb(1),s.bc("ngIf","presentacion"==t.selectItem))},directives:[a.t,a.Q,n.i,a.h,a.g,a.u,a.P,a.E,a.Z,a.F,a.y,a.o,o.j,o.f,o.g,a.w,a.v,a.ab,o.i,o.b,o.e,o.h,a.O,a.X,a.G,n.h,a.H,a.N,a.z,a.q,a.r],pipes:[u.a],styles:[""]}),e})();var R=i("riPR");function q(e,t){1&e&&(s.Mb(0,"ion-buttons",12),s.Kb(1,"ion-back-button",13),s.Lb())}function B(e,t){if(1&e){const e=s.Nb();s.Mb(0,"ion-button",4),s.Ub("click",(function(){return s.ec(e),s.Wb().goToRoute("presentacion")})),s.Kb(1,"ion-icon",14),s.Lb()}}function G(e,t){if(1&e){const e=s.Nb();s.Mb(0,"ion-button",4),s.Ub("click",(function(){return s.ec(e),s.Wb().goToRoute("presentacion")})),s.Kb(1,"ion-icon",14),s.Lb()}}function X(e,t){if(1&e&&(s.Mb(0,"ion-select-option",23),s.ic(1),s.Lb()),2&e){const e=t.$implicit;s.bc("value",e),s.zb(1),s.jc(e.presentacion.nombre)}}function H(e,t){if(1&e){const e=s.Nb();s.Mb(0,"ion-item"),s.Mb(1,"ion-label"),s.ic(2,"Presentaci\xf3n"),s.Lb(),s.Mb(3,"ion-select",21),s.Ub("ngModelChange",(function(t){return s.ec(e),s.Wb(2).selectItem=t})),s.hc(4,X,2,2,"ion-select-option",22),s.Lb(),s.Lb()}if(2&e){const e=s.Wb().$implicit,t=s.Wb();s.zb(3),s.bc("ngModel",t.selectItem),s.zb(1),s.bc("ngForOf",e.presentaciones)}}function Y(e,t){if(1&e){const e=s.Nb();s.Mb(0,"ion-button",19),s.Ub("click",(function(){s.ec(e);const t=s.Wb().$implicit;return s.Wb().addToCart2(t)})),s.Kb(1,"ion-icon",24),s.ic(2," A\xf1adir al carrito "),s.Lb()}}function Q(e,t){if(1&e){const e=s.Nb();s.Mb(0,"ion-button",19),s.Ub("click",(function(){s.ec(e);const t=s.Wb().$implicit;return s.Wb().addToCart(t)})),s.Kb(1,"ion-icon",24),s.ic(2," A\xf1adir al carrito "),s.Lb()}}function _(e,t){if(1&e){const e=s.Nb();s.Mb(0,"ion-button",19),s.Ub("click",(function(){s.ec(e);const t=s.Wb().$implicit;return s.Wb().getDetalle(t)})),s.Kb(1,"ion-icon",25),s.ic(2," Configuraci\xf3n "),s.Lb()}}function Z(e,t){if(1&e){const e=s.Nb();s.Mb(0,"ion-card"),s.Mb(1,"ion-card-header"),s.Mb(2,"ion-card-title",15),s.ic(3),s.Lb(),s.Mb(4,"ion-card-subtitle"),s.ic(5),s.Lb(),s.Lb(),s.Mb(6,"ion-list",16),s.hc(7,H,5,2,"ion-item",17),s.hc(8,Y,3,0,"ion-button",18),s.hc(9,Q,3,0,"ion-button",18),s.Mb(10,"ion-button",19),s.Ub("click",(function(){s.ec(e);const i=t.$implicit;return s.Wb().presentModal(i.id)})),s.Kb(11,"ion-icon",20),s.ic(12," Ver precios "),s.Lb(),s.hc(13,_,3,0,"ion-button",18),s.Lb(),s.Lb()}if(2&e){const e=t.$implicit,i=s.Wb();s.zb(3),s.jc(e.nombre),s.zb(2),s.jc(e.descripcion),s.zb(2),s.bc("ngIf",0!=e.presentaciones.length),s.zb(1),s.bc("ngIf",0!=e.presentaciones.length),s.zb(1),s.bc("ngIf",0==e.presentaciones.length),s.zb(4),s.bc("ngIf","Administrador"==i.administratorApp)}}function V(e,t){if(1&e){const e=s.Nb();s.Mb(0,"ion-fab",26),s.Mb(1,"ion-fab-button",4),s.Ub("click",(function(){return s.ec(e),s.Wb().presentModal()})),s.Kb(2,"ion-icon",27),s.Lb(),s.Lb()}}const ee=[{path:"",component:(()=>{class e{constructor(e,t,i,n,o,a,c,r,s,b){this.loadingController=e,this.notificacionService=t,this.categoriaService=i,this.alertController=n,this.router=o,this.modalController=a,this.actionSheetController=c,this.activatedRoute=r,this.location=s,this.events=b,this.getAll=()=>{this.notificacionService.presentLoading("Cargando..."),this.categoriaService.getAllByCategoria(this.parameter).subscribe(e=>{console.log(e),this.data=[],this.data=e,this.notificacionService.dismissLoading()},e=>{this.data=[],this.notificacionService.dismissLoading()})}}ngOnInit(){}ionViewDidEnter(){this.administratorApp=localStorage.getItem("currentType"),this.parameter=+this.activatedRoute.snapshot.paramMap.get("id"),this.getAll()}goToRoute(e){this.router.navigate([""+e])}goToBack(){this.events.publish("categoria:get",{user:"Refresh"}),this.location.back()}getDetalle(e){this.presentActionSheet(e)}presentActionSheet(e){return Object(r.a)(this,void 0,void 0,(function*(){const t=yield this.actionSheetController.create({header:"Productos",cssClass:"my-custom-class",buttons:[{text:"Actualizar",icon:"create-outline",handler:()=>{this.presentModal(e.id)}},{text:"Eliminar",role:"destructive",icon:"trash-outline",handler:()=>{this.presentAlert(e.id)}},{text:"Cancel",icon:"close",role:"cancel",handler:()=>{console.log("Cancel clicked")}}]});yield t.present()}))}presentModal(e){return Object(r.a)(this,void 0,void 0,(function*(){const t=yield this.modalController.create({component:$,componentProps:{value:e,categoria:this.parameter}});return t.onDidDismiss().then(e=>{e.data&&this.getAll()}),yield t.present()}))}presentAlert(e){return Object(r.a)(this,void 0,void 0,(function*(){const t=yield this.alertController.create({header:"Eliminar",message:"\xbfDeseas eliminar el producto?",cssClass:"my-custom-class",buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary",handler:e=>{}},{text:"Aceptar",handler:()=>{this.delete(e)}}]});yield t.present()}))}delete(e){this.categoriaService.delete(e).subscribe(e=>{this.notificacionService.presentAlert("Producto Eliminado","El producto fue eliminado exitosamente."),this.getAll()},e=>{console})}addToCart(e){if(console.log(e),e.cantidad>0){let t={cantidad:1,cantidadTotal:e.cantidad,subtotal:e.precio,precio:e.precio,nombre:e.nombre,producto:e.id,descripcion:null,presentacionProducto:null},i=[];i=JSON.parse(localStorage.getItem("cart")),i.push(t),localStorage.removeItem("cart"),localStorage.setItem("cart",JSON.stringify(i)),this.notificacionService.presentToast(t.nombre+" agregado al carrito :D")}else this.notificacionService.presentToast("Ya no hay existencias.")}addToCart2(e){if(console.log(this.selectItem),this.selectItem)if(this.selectItem.cantidad>0){let t={cantidad:1,cantidadTotal:this.selectItem.cantidad,subtotal:this.selectItem.precio,precio:this.selectItem.precio,nombre:e.nombre,descripcion:this.selectItem.presentacion.nombre,producto:e.id,presentacionProducto:this.selectItem.presentacion.id},i=[];i=JSON.parse(localStorage.getItem("cart")),i.push(t),localStorage.removeItem("cart"),localStorage.setItem("cart",JSON.stringify(i)),this.notificacionService.presentToast(t.nombre+" agregado al carrito :D")}else this.notificacionService.presentToast("Ya no hay existencias.");else this.notificacionService.presentToast("Debe de seleccionar una presentaci\xf3n.");this.selectItem=null}}return e.\u0275fac=function(t){return new(t||e)(s.Jb(a.T),s.Jb(b.a),s.Jb(S),s.Jb(a.b),s.Jb(c.g),s.Jb(a.U),s.Jb(a.a),s.Jb(c.a),s.Jb(n.f),s.Jb(R.a))},e.\u0275cmp=s.Db({type:e,selectors:[["app-producto"]],decls:23,vars:9,consts:[["translucent","true"],["slot","start",4,"ngIf"],["collapse","true","slot","end"],[3,"click",4,"ngIf"],[3,"click"],["slot","icon-only","name","cart-outline"],["collapse","condense"],["size","large"],["slot","end"],[3,"ngModel","ngModelChange"],[4,"ngFor","ngForOf"],["vertical","bottom","horizontal","end","slot","fixed",4,"ngIf"],["slot","start"],["defaultHref","/cliente/categoria"],["slot","icon-only","name","albums-outline"],[2,"font-size","18px"],["lines","none"],[4,"ngIf"],["expand","block","fill","clear",3,"click",4,"ngIf"],["expand","block","fill","clear",3,"click"],["name","information-circle-outline","slot","start"],["name","selectItem","placeholder","Seleccionar",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["name","cart-outline","slot","start"],["name","settings-outline","slot","start"],["vertical","bottom","horizontal","end","slot","fixed"],["name","add-outline"]],template:function(e,t){1&e&&(s.Mb(0,"ion-header",0),s.Mb(1,"ion-toolbar"),s.hc(2,q,2,0,"ion-buttons",1),s.Mb(3,"ion-title"),s.ic(4,"Productos"),s.Lb(),s.Mb(5,"ion-buttons",2),s.hc(6,B,2,0,"ion-button",3),s.Mb(7,"ion-button",4),s.Ub("click",(function(){return t.goToRoute("carrito")})),s.Kb(8,"ion-icon",5),s.Lb(),s.Lb(),s.Lb(),s.Lb(),s.Mb(9,"ion-content"),s.Mb(10,"ion-header",6),s.Mb(11,"ion-toolbar"),s.Mb(12,"ion-title",7),s.ic(13,"Productos"),s.Lb(),s.Mb(14,"ion-buttons",8),s.hc(15,G,2,0,"ion-button",3),s.Mb(16,"ion-button",4),s.Ub("click",(function(){return t.goToRoute("carrito")})),s.Kb(17,"ion-icon",5),s.Lb(),s.Lb(),s.Lb(),s.Mb(18,"ion-toolbar"),s.Mb(19,"ion-searchbar",9),s.Ub("ngModelChange",(function(e){return t.search=e})),s.Lb(),s.Lb(),s.Lb(),s.hc(20,Z,14,6,"ion-card",10),s.Xb(21,"filter"),s.hc(22,V,3,0,"ion-fab",11),s.Lb()),2&e&&(s.zb(2),s.bc("ngIf",t.parameter),s.zb(4),s.bc("ngIf","Administrador"==t.administratorApp),s.zb(9),s.bc("ngIf","Administrador"==t.administratorApp),s.zb(4),s.bc("ngModel",t.search),s.zb(1),s.bc("ngForOf",s.Yb(21,6,t.data,t.search)),s.zb(2),s.bc("ngIf","Administrador"==t.administratorApp))},directives:[a.t,a.Q,n.i,a.P,a.h,a.g,a.u,a.o,a.D,a.ab,o.e,o.h,n.h,a.e,a.f,a.i,a.j,a.l,a.k,a.z,a.w,a.y,a.G,a.Z,a.H,a.q,a.r],pipes:[u.a],styles:[".img-noticia[_ngcontent-%COMP%]{border-radius:20px;height:90px;width:90px}"]}),e})()}];let te=(()=>{class e{}return e.\u0275mod=s.Hb({type:e}),e.\u0275inj=s.Gb({factory:function(t){return new(t||e)},imports:[[c.i.forChild(ee)],c.i]}),e})(),ie=(()=>{class e{}return e.\u0275mod=s.Hb({type:e}),e.\u0275inj=s.Gb({factory:function(t){return new(t||e)},imports:[[n.b,o.a,a.R,te,u.b]]}),e})()}}]);