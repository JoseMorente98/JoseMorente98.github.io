(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{O3Fr:function(t,e,i){"use strict";i.r(e),i.d(e,"DescuentoPageModule",(function(){return S}));var n=i("ofXK"),o=i("3Pt+"),a=i("TEn/"),s=i("tyNb"),c=i("mrSG"),r=i("fXoL"),d=i("J/xi"),l=i("tk/3"),b=i("z6cu"),u=i("JIr8"),h=i("BK6h");let g=(()=>{class t{constructor(t){this.http=t,this.basePath=h.a.path,this.httpOptions={headers:new l.c({"Content-Type":"application/json"})}}handleError(t){return t.error instanceof ErrorEvent?console.error("Un error ha ocurrido:",t.error.message):console.error(`Backend returned code ${t.status}, body was: `,t.error),Object(b.a)(t)}getAll(){return this.http.get(this.basePath+"descuentos",this.httpOptions).pipe(Object(u.a)(this.handleError))}getSingle(t){return this.http.get(`${this.basePath}descuentos/${t}`).pipe(Object(u.a)(this.handleError))}create(t){return this.http.post(this.basePath+"descuentos",t,this.httpOptions).pipe(Object(u.a)(this.handleError))}update(t){return this.http.put(`${this.basePath}descuentos/${t.id}`,t,this.httpOptions).pipe(Object(u.a)(this.handleError))}delete(t){return this.http.delete(`${this.basePath}descuentos/${t}`,this.httpOptions).pipe(Object(u.a)(this.handleError))}}return t.\u0275fac=function(e){return new(e||t)(r.Qb(l.a))},t.\u0275prov=r.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function p(t,e){1&t&&r.Kb(0,"img",21)}function m(t,e){if(1&t&&r.Kb(0,"img",22),2&t){const t=r.Wb();r.cc("src",t.strImage,r.fc)}}let f=(()=>{class t{constructor(t,e,i,n){this.modalController=t,this.notificacionService=e,this.descuentoService=i,this.navParams=n,this.disabledBtn=!1,this.data={id:"",codigo:"",descripcion:"",cantidad:0,producto:!1,visualizacion:!1}}ngOnInit(){this.data.id=this.navParams.get("value"),this.data.id?this.getSingle(+this.data.id):this.data.codigo=this.generate(10)}closeModal(t){this.modalController.dismiss(t)}getSingle(t){this.descuentoService.getSingle(t).subscribe(t=>{this.data=t,this.strImage=t.imagen},t=>{})}saveChanges(){this.validarCampos()&&(this.disabledBtn=!0,this.data.id?this.update():this.create())}validarCampos(){if(this.data.codigo){if(this.data.descripcion)return!0;this.notificacionService.presentToast("La descripci\xf3n es requerida.")}else this.notificacionService.presentToast("El codigo es requerido.");return!1}create(){this.descuentoService.create(this.data).subscribe(t=>{this.closeModal(t),this.notificacionService.presentAlert("Descuento Agregado","El contacto se ha registrado exitosamente.")},t=>{this.disabledBtn=!1,this.notificacionService.presentToast("Lo sentimos, ha ocurrido un error intenta m\xe1s tarde.")})}update(){this.descuentoService.update(this.data).subscribe(t=>{this.closeModal(t),this.notificacionService.presentAlert("Descuento Actualizado","El contacto se ha actualizado exitosamente.")},t=>{this.disabledBtn=!1,this.notificacionService.presentToast("Lo sentimos, ha ocurrido un error intenta m\xe1s tarde.")})}generate(t){let e;var i="1234567890abcdefghijkmnpqrtuvwxyz0123456789ABCDEFGHIJKLMNPQRTUVWXYZ123467890",n="";for(e=0;e<t;e++)n+=i.charAt(Math.floor(Math.random()*i.length));return n}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(a.U),r.Jb(d.a),r.Jb(g),r.Jb(a.W))},t.\u0275cmp=r.Db({type:t,selectors:[["app-modal-descuento"]],decls:43,vars:9,consts:[["translucent","true"],["slot","end"],[3,"click"],["slot","icon-only","name","close-circle-outline"],[3,"fullscreen"],["collapse","condense"],["size","large"],[2,"width","100%","height","350px"],[1,"container"],["class","img-center","src","https://res.cloudinary.com/devgea-s-a/image/upload/v1594950613/Finca%20Cienaguilla/mkdr6jfwkclzdzubuuwb.png",4,"ngIf"],["class","img-center",3,"src",4,"ngIf"],[3,"ngSubmit"],["position","floating"],["name","person-outline"],["type","text","name","codigo","required","true","maxlength","255",3,"ngModel","ngModelChange"],["type","text","rows","6","cols","20","name","descripcion","required","true","maxlength","255",3,"ngModel","ngModelChange"],["type","text","name","cantidad","required","true","maxlength","11",3,"ngModel","ngModelChange"],["slot","end","name","producto",3,"ngModel","ngModelChange"],["slot","end","name","visualizacion",3,"ngModel","ngModelChange"],["color","primary","expand","block","type","submit",3,"disabled"],["name","save-outline","slot","start"],["src","https://res.cloudinary.com/devgea-s-a/image/upload/v1594950613/Finca%20Cienaguilla/mkdr6jfwkclzdzubuuwb.png",1,"img-center"],[1,"img-center",3,"src"]],template:function(t,e){1&t&&(r.Mb(0,"ion-header",0),r.Mb(1,"ion-toolbar"),r.Mb(2,"ion-title"),r.ic(3,"Descuentos"),r.Lb(),r.Mb(4,"ion-buttons",1),r.Mb(5,"ion-button",2),r.Ub("click",(function(){return e.closeModal()})),r.Kb(6,"ion-icon",3),r.Lb(),r.Lb(),r.Lb(),r.Lb(),r.Mb(7,"ion-content",4),r.Mb(8,"ion-header",5),r.Mb(9,"ion-toolbar"),r.Mb(10,"ion-title",6),r.ic(11,"Descuentos"),r.Lb(),r.Lb(),r.Lb(),r.Mb(12,"div",7),r.Mb(13,"div",8),r.hc(14,p,1,0,"img",9),r.hc(15,m,1,1,"img",10),r.Lb(),r.Lb(),r.Mb(16,"form",11),r.Ub("ngSubmit",(function(){return e.saveChanges()})),r.Mb(17,"ion-item"),r.Mb(18,"ion-label",12),r.Kb(19,"ion-icon",13),r.ic(20," C\xf3digo: "),r.Lb(),r.Mb(21,"ion-input",14),r.Ub("ngModelChange",(function(t){return e.data.codigo=t})),r.Lb(),r.Lb(),r.Mb(22,"ion-item"),r.Mb(23,"ion-label",12),r.Kb(24,"ion-icon",13),r.ic(25," Descripcion: "),r.Lb(),r.Mb(26,"ion-textarea",15),r.Ub("ngModelChange",(function(t){return e.data.descripcion=t})),r.Lb(),r.Lb(),r.Mb(27,"ion-item"),r.Mb(28,"ion-label",12),r.Kb(29,"ion-icon",13),r.ic(30," Cantidad: "),r.Lb(),r.Mb(31,"ion-input",16),r.Ub("ngModelChange",(function(t){return e.data.cantidad=t})),r.Lb(),r.Lb(),r.Mb(32,"ion-item"),r.Mb(33,"ion-label"),r.ic(34,"\xbfTodos los productos?"),r.Lb(),r.Mb(35,"ion-checkbox",17),r.Ub("ngModelChange",(function(t){return e.data.producto=t})),r.Lb(),r.Lb(),r.Mb(36,"ion-item"),r.Mb(37,"ion-label"),r.ic(38,"Visualizaci\xf3n"),r.Lb(),r.Mb(39,"ion-checkbox",18),r.Ub("ngModelChange",(function(t){return e.data.visualizacion=t})),r.Lb(),r.Lb(),r.Mb(40,"ion-button",19),r.Kb(41,"ion-icon",20),r.ic(42," Guardar Cambios "),r.Lb(),r.Lb(),r.Lb()),2&t&&(r.zb(7),r.bc("fullscreen",!0),r.zb(7),r.bc("ngIf",!e.strImage),r.zb(1),r.bc("ngIf",e.strImage),r.zb(6),r.bc("ngModel",e.data.codigo),r.zb(5),r.bc("ngModel",e.data.descripcion),r.zb(5),r.bc("ngModel",e.data.cantidad),r.zb(4),r.bc("ngModel",e.data.producto),r.zb(4),r.bc("ngModel",e.data.visualizacion),r.zb(1),r.bc("disabled",e.disabledBtn))},directives:[a.t,a.Q,a.P,a.h,a.g,a.u,a.o,n.i,o.j,o.f,o.g,a.w,a.y,a.v,a.ab,o.i,o.b,o.e,o.h,a.O,a.m,a.c],styles:["ion-content[_ngcontent-%COMP%]{--padding-start:15px;--padding-end:15px}"]}),t})();function M(t,e){if(1&t&&(r.Mb(0,"div",12),r.Kb(1,"img",13),r.Mb(2,"div",14),r.Mb(3,"div",15),r.Mb(4,"a"),r.Mb(5,"h5"),r.ic(6),r.Lb(),r.Lb(),r.Kb(7,"div",16),r.Mb(8,"p"),r.ic(9),r.Lb(),r.Lb(),r.Lb(),r.Lb()),2&t){const t=r.Wb().$implicit;r.zb(6),r.jc(t.codigo),r.zb(3),r.kc("",t.descripcion," ")}}function v(t,e){if(1&t){const t=r.Nb();r.Mb(0,"div",17),r.Ub("click",(function(){r.ec(t);const e=r.Wb().$implicit;return r.Wb().getDetalle(e)})),r.Kb(1,"img",13),r.Mb(2,"div",14),r.Mb(3,"div",15),r.Mb(4,"a"),r.Mb(5,"h5"),r.ic(6),r.Lb(),r.Lb(),r.Kb(7,"div",16),r.Mb(8,"p"),r.ic(9),r.Lb(),r.Lb(),r.Lb(),r.Lb()}if(2&t){const t=r.Wb().$implicit;r.zb(6),r.jc(t.codigo),r.zb(3),r.kc("",t.descripcion," ")}}function L(t,e){if(1&t&&(r.Mb(0,"div"),r.hc(1,M,10,2,"div",10),r.hc(2,v,10,2,"div",11),r.Lb()),2&t){const t=e.$implicit,i=r.Wb();r.zb(1),r.bc("ngIf",1==t.visualizacion&&"Administrador"!=i.administratorApp),r.zb(1),r.bc("ngIf","Administrador"==i.administratorApp)}}function C(t,e){if(1&t){const t=r.Nb();r.Mb(0,"ion-fab",18),r.Mb(1,"ion-fab-button",2),r.Ub("click",(function(){return r.ec(t),r.Wb().presentModal()})),r.Kb(2,"ion-icon",19),r.Lb(),r.Lb()}}const z=[{path:"",component:(()=>{class t{constructor(t,e,i,n,o,a,s,c,r){this.loadingController=t,this.notificacionService=e,this.descuentoService=i,this.alertController=n,this.router=o,this.modalController=a,this.actionSheetController=s,this.activatedRoute=c,this.location=r,this.getAll=()=>{this.notificacionService.presentLoading("Cargando..."),this.descuentoService.getAll().subscribe(t=>{console.log(t),this.data=[],this.data=t,this.notificacionService.dismissLoading()},t=>{this.data=[],this.notificacionService.dismissLoading()})}}ngOnInit(){}ionViewDidEnter(){this.administratorApp=localStorage.getItem("currentType"),this.getAll()}goToRoute(t){this.router.navigate([""+t])}getDetalle(t){this.presentActionSheet(t)}presentActionSheet(t){return Object(c.a)(this,void 0,void 0,(function*(){const e=yield this.actionSheetController.create({header:"Descuentos",cssClass:"my-custom-class",buttons:[{text:"Actualizar",icon:"create-outline",handler:()=>{this.presentModal(t.id)}},{text:"Eliminar",role:"destructive",icon:"trash-outline",handler:()=>{this.presentAlert(t.id)}},{text:"Cancelar",icon:"close",role:"cancel",handler:()=>{console.log("Cancel clicked")}}]});yield e.present()}))}presentModal(t){return Object(c.a)(this,void 0,void 0,(function*(){const e=yield this.modalController.create({component:f,componentProps:{value:t,categoria:this.parameter}});return e.onDidDismiss().then(t=>{t.data&&this.getAll()}),yield e.present()}))}presentAlert(t){return Object(c.a)(this,void 0,void 0,(function*(){const e=yield this.alertController.create({header:"Eliminar",message:"\xbfDeseas eliminar el descuento?",cssClass:"my-custom-class",buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary",handler:t=>{}},{text:"Aceptar",handler:()=>{this.delete(t)}}]});yield e.present()}))}delete(t){this.descuentoService.delete(t).subscribe(t=>{this.notificacionService.presentAlert("Descuento Eliminado","El descuento fue eliminado exitosamente."),this.getAll()},t=>{console})}}return t.\u0275fac=function(e){return new(e||t)(r.Jb(a.T),r.Jb(d.a),r.Jb(g),r.Jb(a.b),r.Jb(s.g),r.Jb(a.U),r.Jb(a.a),r.Jb(s.a),r.Jb(n.f))},t.\u0275cmp=r.Db({type:t,selectors:[["app-descuento"]],decls:17,vars:3,consts:[["translucent","true"],["collapse","true","slot","end"],[3,"click"],["slot","icon-only","name","cart-outline"],[3,"fullscreen"],["collapse","condense"],["size","large"],["slot","end"],[4,"ngFor","ngForOf"],["vertical","bottom","horizontal","end","slot","fixed",4,"ngIf"],["class","categories_post",4,"ngIf"],["class","categories_post",3,"click",4,"ngIf"],[1,"categories_post"],["src","https://res.cloudinary.com/devgea-s-a/image/upload/v1595208129/Finca%20Cienaguilla/hrgsj3qxu6wfbvm0qwuy.png","alt","post",1,"card-img","rounded-0"],[1,"categories_details"],[1,"categories_text"],[1,"border_line"],[1,"categories_post",3,"click"],["vertical","bottom","horizontal","end","slot","fixed"],["name","add-outline"]],template:function(t,e){1&t&&(r.Mb(0,"ion-header",0),r.Mb(1,"ion-toolbar"),r.Mb(2,"ion-title"),r.ic(3,"Descuentos"),r.Lb(),r.Mb(4,"ion-buttons",1),r.Mb(5,"ion-button",2),r.Ub("click",(function(){return e.goToRoute("carrito")})),r.Kb(6,"ion-icon",3),r.Lb(),r.Lb(),r.Lb(),r.Lb(),r.Mb(7,"ion-content",4),r.Mb(8,"ion-header",5),r.Mb(9,"ion-toolbar"),r.Mb(10,"ion-title",6),r.ic(11,"Descuentos"),r.Lb(),r.Mb(12,"ion-buttons",7),r.Mb(13,"ion-button",2),r.Ub("click",(function(){return e.goToRoute("carrito")})),r.Kb(14,"ion-icon",3),r.Lb(),r.Lb(),r.Lb(),r.Lb(),r.hc(15,L,3,2,"div",8),r.hc(16,C,3,0,"ion-fab",9),r.Lb()),2&t&&(r.zb(7),r.bc("fullscreen",!0),r.zb(8),r.bc("ngForOf",e.data),r.zb(1),r.bc("ngIf","Administrador"==e.administratorApp))},directives:[a.t,a.Q,a.P,a.h,a.g,a.u,a.o,n.h,n.i,a.q,a.r],styles:["ion-content[_ngcontent-%COMP%]{--padding-start:15px;--padding-end:15px}.categories_post[_ngcontent-%COMP%]{margin:3%!important}"]}),t})()}];let y=(()=>{class t{}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)},imports:[[s.i.forChild(z)],s.i]}),t})(),S=(()=>{class t{}return t.\u0275mod=r.Hb({type:t}),t.\u0275inj=r.Gb({factory:function(e){return new(e||t)},imports:[[n.b,o.a,a.R,y]]}),t})()}}]);