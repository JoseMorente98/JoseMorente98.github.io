"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9389],{1770:(x,m,s)=>{s.r(m),s.d(m,{DetalleVentaPageModule:()=>T});var d=s(177),p=s(4341),i=s(5150),u=s(8986),_=s(467),n=s(3953),g=s(3656),f=s(9708);let h=(()=>{var o;class l{constructor(a,t,r){this.navParams=a,this.ventaService=t,this.modalController=r,this.data={id:0,tipo_pago:"EFECTIVO",importe_ingresado:"",importe:"",vuelto:"",estado_pago:""},this.total=0,this.restante=0,this.importes=0,this.btnDisabled=!1}ngOnInit(){this.navParams.get("venta")&&(this.informacionVenta=this.navParams.get("venta"),console.log(this.informacionVenta),this.total=+this.informacionVenta.total,console.log(this.informacionVenta.importes),this.informacionVenta.importes.forEach(a=>{this.importes+=Number(a.importe)}),console.log(this.importes),this.restante=this.total-this.importes,this.data.importe_ingresado=this.restante,this.data.importe=this.restante)}obtenerImporte(a){const t=Number(a.target.value);console.log(t),t<this.restante?(this.data.vuelto=(0).toFixed(2),this.data.importe=t):(this.data.vuelto=Number(t-this.restante).toFixed(2),this.data.importe=this.restante)}seleccionarMetodoPago(a){this.data.tipo_pago=a.detail.value}saveChanges(){console.log(Number(this.data.importe)),console.log(Number(this.informacionVenta.total)),Number(this.data.importe)==Number(this.restante)?(console.log("PAGO COMPLETO"),this.data.estado_pago="COMPLETO"):(console.log("PARCIAL"),this.data.estado_pago="PARCIAL"),this.data.id=this.informacionVenta.id,console.log(this.data),this.btnDisabled=!0,this.ventaService.pagarVenta(this.data).subscribe({next:a=>{console.log(a),this.modalController.dismiss(this.informacionVenta),this.btnDisabled=!1},error:a=>{this.btnDisabled=!1,console.log(a)}})}close(){this.modalController.dismiss()}}return(o=l).\u0275fac=function(a){return new(a||o)(n.rXU(g.y8),n.rXU(f.s),n.rXU(i.W3))},o.\u0275cmp=n.VBU({type:o,selectors:[["app-pagar"]],decls:33,vars:5,consts:[["mode","ios"],["color","primary"],["slot","start",3,"click"],["slot","icon-only","name","close-circle"],[1,"ion-padding"],["lines","none",1,"input-item"],["slot","start","name","bookmarks","color","primary"],["label","M\xe9todo de pago","placeholder","Seleccione una opci\xf3n",3,"ionChange","value"],["value","EFECTIVO"],["value","DEPOSITO"],["value","TARJETA"],["slot","start","name","cash","color","primary"],["label","Restante","placeholder","Ingresar importe","type","text","disabled","",3,"value"],["label","Importe","placeholder","Ingresar importe","type","text",3,"ngModelChange","ionInput","ngModel"],["label","Vuelto","placeholder","Vuelto del cliente","type","text","disabled","",3,"ngModelChange","ngModel"],["expand","block","color","primary",3,"click","disabled"],["name","enter","slot","start"]],template:function(a,t){1&a&&(n.j41(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-buttons",2),n.bIt("click",function(){return t.close()}),n.j41(3,"ion-button"),n.nrm(4,"ion-icon",3),n.k0s()(),n.j41(5,"ion-title"),n.EFF(6,"REALIZAR PAGO"),n.k0s()()(),n.j41(7,"ion-content",4)(8,"ion-item",5),n.nrm(9,"ion-icon",6),n.j41(10,"ion-select",7),n.bIt("ionChange",function(c){return t.seleccionarMetodoPago(c)}),n.j41(11,"ion-select-option",8),n.EFF(12,"Efectivo"),n.k0s(),n.j41(13,"ion-select-option",9),n.EFF(14,"Dep\xf3sito Bancario"),n.k0s(),n.j41(15,"ion-select-option",10),n.EFF(16,"Tarjeta"),n.k0s()()(),n.j41(17,"ion-item",5),n.nrm(18,"ion-icon",11)(19,"ion-input",12),n.k0s(),n.j41(20,"ion-item",5),n.nrm(21,"ion-icon",11),n.j41(22,"ion-input",13),n.mxI("ngModelChange",function(c){return n.DH7(t.data.importe_ingresado,c)||(t.data.importe_ingresado=c),c}),n.bIt("ionInput",function(c){return t.obtenerImporte(c)}),n.k0s()(),n.j41(23,"ion-item",5),n.nrm(24,"ion-icon",11),n.j41(25,"ion-input",14),n.mxI("ngModelChange",function(c){return n.DH7(t.data.vuelto,c)||(t.data.vuelto=c),c}),n.k0s()()(),n.j41(26,"ion-footer")(27,"ion-toolbar")(28,"ion-row")(29,"ion-col")(30,"ion-button",15),n.bIt("click",function(){return t.saveChanges()}),n.nrm(31,"ion-icon",16),n.EFF(32," Crear pago "),n.k0s()()()()()),2&a&&(n.R7$(10),n.Y8G("value",t.data.tipo_pago),n.R7$(9),n.FS9("value",t.restante),n.R7$(3),n.R50("ngModel",t.data.importe_ingresado),n.R7$(3),n.R50("ngModel",t.data.vuelto),n.R7$(5),n.Y8G("disabled",t.btnDisabled))},dependencies:[p.BC,p.vS,i.Jm,i.QW,i.hU,i.W9,i.M0,i.eU,i.iq,i.$w,i.uz,i.ln,i.Nm,i.Ip,i.BC,i.ai,i.Je,i.Gw]}),l})();function b(o,l){if(1&o&&(n.j41(0,"div",21)(1,"label",22),n.EFF(2),n.k0s(),n.j41(3,"div",23)(4,"div",24),n.nrm(5,"div",25),n.j41(6,"div",26)(7,"ion-label"),n.nrm(8,"ion-icon",27),n.EFF(9),n.k0s(),n.nrm(10,"br"),n.j41(11,"ion-label"),n.nrm(12,"ion-icon",28),n.EFF(13),n.k0s()()()()()),2&o){const e=l.$implicit;n.R7$(2),n.JRh(null==e.producto||null==e.producto.plantilla?null:e.producto.plantilla.nombre),n.R7$(3),n.xc7("background-image","url("+(null==e.producto||null==e.producto.plantilla?null:e.producto.plantilla.img)+")"),n.R7$(4),n.SpI(" Cantidad: ",e.cantidad,""),n.R7$(4),n.SpI(" Subtotal: Q ",e.subtotal,"")}}function P(o,l){1&o&&(n.j41(0,"div",30),n.EFF(1,"Efectivo"),n.k0s())}function v(o,l){1&o&&(n.j41(0,"div",30),n.EFF(1,"Dep\xf3sito Bancario"),n.k0s())}function C(o,l){1&o&&(n.j41(0,"div",30),n.EFF(1,"Tarjeta"),n.k0s())}function V(o,l){if(1&o&&(n.j41(0,"ion-row")(1,"ion-col"),n.DNE(2,P,2,0,"div",29)(3,v,2,0,"div",29)(4,C,2,0,"div",29),n.k0s(),n.j41(5,"ion-col")(6,"div",30),n.EFF(7),n.nI1(8,"number"),n.k0s()()()),2&o){const e=l.$implicit;n.R7$(2),n.Y8G("ngIf","EFECTIVO"==e.tipo_pago),n.R7$(),n.Y8G("ngIf","DEPOSITO"==e.tipo_pago),n.R7$(),n.Y8G("ngIf","TARJETA"==e.tipo_pago),n.R7$(3),n.SpI(" Q ",n.i5U(8,4,e.importe,"1.2-2")," ")}}function M(o,l){1&o&&(n.j41(0,"ion-button",32),n.nrm(1,"ion-icon",33),n.EFF(2," Pendiente de pago "),n.k0s())}function k(o,l){1&o&&(n.j41(0,"ion-button",32),n.nrm(1,"ion-icon",33),n.EFF(2," Pago parcial "),n.k0s())}function O(o,l){if(1&o&&(n.j41(0,"ion-col"),n.DNE(1,M,3,0,"ion-button",31)(2,k,3,0,"ion-button",31),n.k0s()),2&o){const e=n.XpG();n.R7$(),n.Y8G("ngIf","PENDIENTE"==(null==e.informacionVenta?null:e.informacionVenta.estado_pago)),n.R7$(),n.Y8G("ngIf","PARCIAL"==(null==e.informacionVenta?null:e.informacionVenta.estado_pago))}}function E(o,l){if(1&o){const e=n.RV6();n.j41(0,"ion-button",36),n.bIt("click",function(){n.eBV(e);const t=n.XpG(2);return n.Njj(t.actualizarEstado("EN_PROCESO"))}),n.nrm(1,"ion-icon",37),n.EFF(2," En Proceso "),n.k0s()}}function F(o,l){if(1&o){const e=n.RV6();n.j41(0,"ion-button",36),n.bIt("click",function(){n.eBV(e);const t=n.XpG(2);return n.Njj(t.actualizarEstado("ENTREGADO"))}),n.nrm(1,"ion-icon",37),n.EFF(2," Entregado "),n.k0s()}}function D(o,l){1&o&&(n.j41(0,"ion-button",38),n.nrm(1,"ion-icon",39),n.EFF(2," Entregado "),n.k0s())}function I(o,l){if(1&o&&(n.j41(0,"ion-col"),n.DNE(1,E,3,0,"ion-button",34)(2,F,3,0,"ion-button",34)(3,D,3,0,"ion-button",35),n.k0s()),2&o){const e=n.XpG();n.R7$(),n.Y8G("ngIf","PUBLICADO"==(null==e.informacionVenta?null:e.informacionVenta.estado_venta)),n.R7$(),n.Y8G("ngIf","EN_PROCESO"==(null==e.informacionVenta?null:e.informacionVenta.estado_venta)),n.R7$(),n.Y8G("ngIf","ENTREGADO"==(null==e.informacionVenta?null:e.informacionVenta.estado_venta))}}function R(o,l){1&o&&(n.j41(0,"ion-col")(1,"ion-button",32),n.nrm(2,"ion-icon",40),n.EFF(3," Cancelado "),n.k0s()())}const j=[{path:"",component:(()=>{var o;class l{constructor(a,t,r,c){this.navController=a,this.ventaService=t,this.activatedRoute=r,this.modalController=c}ngOnInit(){this.getSingle(+this.activatedRoute.snapshot.paramMap.get("id"))}onBack(){this.navController.back()}getSingle(a){this.ventaService.getSingle(a).subscribe({next:t=>{this.informacionVenta=t,console.log(this.informacionVenta)}})}openModal(){var a=this;return(0,_.A)(function*(){const t=yield a.modalController.create({component:h,cssClass:"filter-modal",componentProps:{venta:a.informacionVenta}});yield t.present();const{data:r}=yield t.onDidDismiss();r&&a.getSingle(+a.activatedRoute.snapshot.paramMap.get("id"))})()}actualizarEstado(a){this.informacionVenta.estado_venta=a,this.ventaService.cambiarEstadoVenta(this.informacionVenta).subscribe({next:t=>{this.getSingle(+this.activatedRoute.snapshot.paramMap.get("id"))}})}}return(o=l).\u0275fac=function(a){return new(a||o)(n.rXU(g.q9),n.rXU(f.s),n.rXU(u.nX),n.rXU(i.W3))},o.\u0275cmp=n.VBU({type:o,selectors:[["app-detalle-venta"]],decls:42,vars:23,consts:[["mode","ios"],["color","primary"],["slot","start"],[3,"click"],["slot","icon-only","name","chevron-back-circle"],["slot","end"],["slot","icon-only","name","card"],[1,"ion-padding",3,"fullscreen"],["lines","none",1,"input-item"],["slot","start","name","person","color","primary"],["type","text","disabled","",3,"value"],["slot","start","name","calendar","color","primary"],["slot","start","name","document-text-outline","color","primary"],["disabled","",3,"value","autoGrow"],[1,"master-container"],["class","card cart",4,"ngFor","ngForOf"],[1,"card_footer"],[4,"ngFor","ngForOf"],[1,"ion-text-center","total_des_carrito"],[1,"ion-text-center","total_carrito"],[4,"ngIf"],[1,"card","cart"],[1,"title"],[1,"products"],[1,"product"],[1,"card-product-img-cart"],[1,"detalle_carrito"],["name","cube","color","primary"],["name","cash","color","primary"],["class","ion-text-center importes",4,"ngIf"],[1,"ion-text-center","importes"],["expand","block","fill","solid","color","danger","disabled","",4,"ngIf"],["expand","block","fill","solid","color","danger","disabled",""],["name","cash-outline","slot","start"],["expand","block","fill","solid","color","primary",3,"click",4,"ngIf"],["expand","block","fill","solid","color","primary","disabled","",4,"ngIf"],["expand","block","fill","solid","color","primary",3,"click"],["name","chevron-forward-outline","slot","start"],["expand","block","fill","solid","color","primary","disabled",""],["name","checkmark-outline","slot","start"],["name","close-outline","slot","start"]],template:function(a,t){1&a&&(n.j41(0,"ion-header",0)(1,"ion-toolbar",1)(2,"ion-buttons",2)(3,"ion-button",3),n.bIt("click",function(){return t.onBack()}),n.nrm(4,"ion-icon",4),n.k0s()(),n.j41(5,"ion-title"),n.EFF(6),n.k0s(),n.j41(7,"ion-buttons",5)(8,"ion-button",3),n.bIt("click",function(){return t.openModal()}),n.nrm(9,"ion-icon",6),n.k0s()()()(),n.j41(10,"ion-content",7)(11,"ion-item",8),n.nrm(12,"ion-icon",9)(13,"ion-input",10),n.k0s(),n.j41(14,"ion-item",8),n.nrm(15,"ion-icon",9)(16,"ion-input",10),n.k0s(),n.j41(17,"ion-item",8),n.nrm(18,"ion-icon",11)(19,"ion-input",10),n.nI1(20,"date"),n.k0s(),n.j41(21,"ion-item",8),n.nrm(22,"ion-icon",12)(23,"ion-textarea",13),n.k0s(),n.j41(24,"div",14),n.DNE(25,b,14,5,"div",15),n.k0s()(),n.j41(26,"ion-footer")(27,"div",16),n.DNE(28,V,9,7,"ion-row",17),n.nrm(29,"hr"),n.j41(30,"ion-row")(31,"ion-col")(32,"div",18),n.EFF(33," Total "),n.k0s()(),n.j41(34,"ion-col")(35,"div",19),n.EFF(36),n.nI1(37,"number"),n.k0s()()(),n.j41(38,"ion-row"),n.DNE(39,O,3,2,"ion-col",20)(40,I,4,3,"ion-col",20)(41,R,4,0,"ion-col",20),n.k0s()()()),2&a&&(n.R7$(6),n.SpI("VENTA NO. ",null==t.informacionVenta?null:t.informacionVenta.id,""),n.R7$(4),n.Y8G("fullscreen",!0),n.R7$(3),n.FCK("value","",null==t.informacionVenta?null:t.informacionVenta.cliente.nombre," ",null==t.informacionVenta?null:t.informacionVenta.cliente.apellido,""),n.R7$(3),n.FCK("value","",null==t.informacionVenta?null:t.informacionVenta.usuario.nombre," ",null==t.informacionVenta?null:t.informacionVenta.usuario.apellido,""),n.R7$(3),n.FS9("value",n.i5U(20,17,null==t.informacionVenta?null:t.informacionVenta.createdAt,"dd/MM/yyyy h:mm a")),n.R7$(4),n.FS9("value",null==t.informacionVenta?null:t.informacionVenta.observaciones),n.Y8G("autoGrow",!0),n.R7$(2),n.Y8G("ngForOf",null==t.informacionVenta?null:t.informacionVenta.detalle),n.R7$(3),n.Y8G("ngForOf",null==t.informacionVenta?null:t.informacionVenta.importes),n.R7$(8),n.SpI(" Q ",n.i5U(37,20,null==t.informacionVenta?null:t.informacionVenta.total,"1.2-2")," "),n.R7$(3),n.Y8G("ngIf","PUBLICADO"==(null==t.informacionVenta?null:t.informacionVenta.estado_venta)&&"COMPLETO"!=(null==t.informacionVenta?null:t.informacionVenta.estado_pago)),n.R7$(),n.Y8G("ngIf","COMPLETO"==(null==t.informacionVenta?null:t.informacionVenta.estado_pago)&&"CANCELADO"!=(null==t.informacionVenta?null:t.informacionVenta.estado_venta)),n.R7$(),n.Y8G("ngIf","CANCELADO"==(null==t.informacionVenta?null:t.informacionVenta.estado_venta)))},dependencies:[d.Sq,d.bT,i.Jm,i.QW,i.hU,i.W9,i.M0,i.eU,i.iq,i.$w,i.uz,i.he,i.ln,i.nc,i.BC,i.ai,i.Gw,d.QX,d.vh],styles:[".master-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto;gap:10px}.card[_ngcontent-%COMP%]{padding:.8em;background:#f5f5f5;position:relative;overflow:visible;border-radius:20px;box-shadow:0 1px 3px #0000001f,0 1px 2px #0000003d}.title[_ngcontent-%COMP%]{width:100%;position:relative;display:flex;align-items:center;border-bottom:1px solid #CCC;font-weight:900;font-size:1em;line-height:1.5;padding:5px}.card-product-img-cart[_ngcontent-%COMP%]{height:75px;width:75px;border-radius:.5rem;transition:.3s ease;background-repeat:no-repeat;background-attachment:fixed;background-size:cover;background-position:center}.cart[_ngcontent-%COMP%]{border-radius:20px}.cart[_ngcontent-%COMP%]   .products[_ngcontent-%COMP%]{display:flex;flex-direction:column}.cart[_ngcontent-%COMP%]   .products[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]{padding:5px;display:grid;grid-template-columns:1fr 2fr;gap:10px}.cart[_ngcontent-%COMP%]   .products[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .title-product-div[_ngcontent-%COMP%]{align-content:center}.cart[_ngcontent-%COMP%]   .products[_ngcontent-%COMP%]   .product[_ngcontent-%COMP%]   .title-product-div[_ngcontent-%COMP%]   .title-product[_ngcontent-%COMP%]{font-weight:900;font-size:1em;line-height:1.5}.cart[_ngcontent-%COMP%]   .quantity[_ngcontent-%COMP%]{height:30px;display:grid;grid-template-columns:1fr 1fr 1fr;margin:auto;background-color:#fff;border:1px solid #e5e5e5;border-radius:7px;filter:drop-shadow(0px 1px 0px #efefef) drop-shadow(0px 1px .5px rgba(239,239,239,.5))}.cart[_ngcontent-%COMP%]   .quantity[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:20px;height:30px;display:flex;align-items:center;justify-content:center;padding-bottom:2px;font-size:15px;font-weight:700;color:#47484b}.cart[_ngcontent-%COMP%]   .quantity[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:30px;height:30px;display:flex;align-items:center;justify-content:center;border:0;outline:none;background-color:transparent;padding-bottom:2px}.cart[_ngcontent-%COMP%]   .options-cart[_ngcontent-%COMP%]{display:grid;grid-template-rows:1fr 1fr;gap:2px}.card[_ngcontent-%COMP%]   .small[_ngcontent-%COMP%]{font-size:15px;margin:0 0 auto auto}.card[_ngcontent-%COMP%]   .small[_ngcontent-%COMP%]   sup[_ngcontent-%COMP%]{font-size:px}.price[_ngcontent-%COMP%]{font-weight:900;font-size:1em;color:#000}.total_des_carrito[_ngcontent-%COMP%]{font-weight:900;font-size:1.2em;text-align:end;color:var(--ion-color-dark)}.total_carrito[_ngcontent-%COMP%]{font-weight:900;font-size:1.2em;text-align:end;color:var(--ion-color-primary)}.card_footer[_ngcontent-%COMP%]{background:#f5f5f5;padding-top:16px;border-radius:20px 20px 0 0;box-shadow:0 1px 10px #0000001f,0 1px 10px #00000080}.detalle_carrito[_ngcontent-%COMP%]{font-weight:900;font-size:.8em}.importes[_ngcontent-%COMP%]{font-weight:900;font-size:.8em;color:var(--ion-color-dark)}"]}),l})()}];let y=(()=>{var o;class l{}return(o=l).\u0275fac=function(a){return new(a||o)},o.\u0275mod=n.$C({type:o}),o.\u0275inj=n.G2t({imports:[u.iI.forChild(j),u.iI]}),l})(),T=(()=>{var o;class l{}return(o=l).\u0275fac=function(a){return new(a||o)},o.\u0275mod=n.$C({type:o}),o.\u0275inj=n.G2t({imports:[d.MD,p.YN,i.bv,y]}),l})()}}]);