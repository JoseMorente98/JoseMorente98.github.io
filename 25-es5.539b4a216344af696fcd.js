function _createForOfIteratorHelper(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,r=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return r=e.done,e},e:function(e){c=!0,a=e},f:function(){try{r||null==n.return||n.return()}finally{if(c)throw a}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{"4v5Q":function(e,t,n){"use strict";n.r(t),n.d(t,"CompraPageModule",(function(){return k}));var i=n("ofXK"),o=n("3Pt+"),a=n("TEn/"),r=n("tyNb"),c=n("fXoL"),l=n("a/9d"),s=n("J/xi"),b=n("DgPi"),u=n("TgOq"),d=n("ba22");function g(e,t){1&e&&c.Kb(0,"img",30)}function f(e,t){if(1&e&&c.Kb(0,"img",31),2&e){var n=c.Wb();c.cc("src",n.strImage,c.fc)}}function p(e,t){if(1&e&&(c.Mb(0,"ion-select-option",32),c.ic(1),c.Lb()),2&e){var n=t.$implicit;c.bc("value",n.id),c.zb(1),c.jc(n.direccion)}}function h(e,t){if(1&e&&(c.Mb(0,"ion-select-option",32),c.ic(1),c.Lb()),2&e){var n=t.$implicit;c.bc("value",n.id),c.zb(1),c.jc(n.nombre)}}function m(e,t){if(1&e){var n=c.Nb();c.Mb(0,"ion-item"),c.Mb(1,"ion-label",14),c.Kb(2,"ion-icon",33),c.ic(3," No. Boleta: "),c.Lb(),c.Mb(4,"ion-input",34),c.Ub("ngModelChange",(function(e){return c.ec(n),c.Wb().data.boleta=e})),c.Lb(),c.Lb()}if(2&e){var i=c.Wb();c.zb(4),c.bc("ngModel",i.data.boleta)}}function v(e,t){if(1&e){var n=c.Nb();c.Mb(0,"ion-button",35),c.Ub("click",(function(){return c.ec(n),c.Wb().libreria()})),c.Kb(1,"ion-icon",36),c.ic(2," Seleccionar Imagen "),c.Lb()}}var y,M,L,C=[{path:"",component:(y=function(){function e(t,n,i,o,a,r,c){var l=this;_classCallCheck(this,e),this.camera=t,this.notificacionService=n,this.uploadFileService=i,this.ventaService=o,this.direccionService=a,this.location=r,this.router=c,this.disabledBtn=!1,this.data={nit:"",total:0,boleta:"",boletaImagen:"",observaciones:"",estado:0,tipoOrden:0,direccion:0,fechaEntrega:null,fechaRecibido:null,usuario:2,detalle:[]},this.cart=[],this.direcciones=[],this.tipoDePago=[],this.getAllTipos=function(){l.ventaService.getAllTipo().subscribe((function(e){console.log(e),l.tipoDePago=[],l.tipoDePago=e}),(function(e){l.tipoDePago=[]}))},this.getAllDirecciones=function(){l.direccionService.getAll().subscribe((function(e){console.log(e),l.direcciones=[],l.direcciones=e}),(function(e){l.direcciones=[]}))}}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"ionViewWillEnter",value:function(){this.cart=JSON.parse(localStorage.getItem("cart")),this.data.detalle=JSON.parse(localStorage.getItem("cart")),this.obtenerTotal(),this.getAllDirecciones(),this.getAllTipos()}},{key:"goToBack",value:function(){this.location.back()}},{key:"goToRoute",value:function(e){this.router.navigate([""+e])}},{key:"saveChanges",value:function(){this.strImage&&(this.data.boletaImagen=this.strImage),this.data.estado=this.data.tipoOrden,this.validarCampos()&&this.create()}},{key:"validarCampos",value:function(){if(this.data.direccion)if(this.data.tipoOrden){if(2!=this.data.tipoOrden)return!0;if(this.validarDeposito())return!0}else this.notificacionService.presentToast("El tipo de orden es requerido.");else this.notificacionService.presentToast("La direcci\xf3n es requerida.");return!1}},{key:"validarDeposito",value:function(){if(this.data.boleta){if(this.data.boletaImagen)return!0;this.notificacionService.presentToast("La imagen de la boleta es requerido.")}else this.notificacionService.presentToast("El No. de boleta es requerido.");return!1}},{key:"create",value:function(){var e=this;this.data.estado=this.data.tipoOrden,this.ventaService.create(this.data).subscribe((function(t){console.log(t),e.notificacionService.presentAlert("Compra Realizada","Su compra se ha registrado exitosamente."),e.router.navigate(["compras/buy"])}),(function(t){e.notificacionService.presentToast("Lo sentimos, ha ocurrido un error intenta m\xe1s tarde.")}))}},{key:"obtenerTotal",value:function(){var e,t=0,n=_createForOfIteratorHelper(this.cart);try{for(n.s();!(e=n.n()).done;)t+=e.value.subtotal}catch(i){n.e(i)}finally{n.f()}this.data.total=t.toFixed(2)}},{key:"libreria",value:function(){this.procesarImagen({quality:60,destinationType:this.camera.DestinationType.FILE_URI,encodingType:this.camera.EncodingType.JPEG,mediaType:this.camera.MediaType.PICTURE,correctOrientation:!0,sourceType:this.camera.PictureSourceType.PHOTOLIBRARY})}},{key:"procesarImagen",value:function(e){var t=this;this.camera.getPicture(e).then((function(e){t.strImage="https://i.pinimg.com/originals/8e/e2/12/8ee212dac057d412972e0c8cc164deee.gif",t.uploadFileService.subirImagen(e,"Ecommerce/Venta").then((function(e){t.strImage=e.secure_url})).catch((function(e){t.notificacionService.presentToast("Lo sentimos, ha ocurrido un error intenta m\xe1s tarde.")}))}),(function(e){t.notificacionService.presentToast("Lo sentimos, servicio inhabilitado para tu dispositivo.")}))}}]),e}(),y.\u0275fac=function(e){return new(e||y)(c.Jb(l.a),c.Jb(s.a),c.Jb(b.a),c.Jb(u.a),c.Jb(d.a),c.Jb(i.f),c.Jb(r.g))},y.\u0275cmp=c.Db({type:y,selectors:[["app-compra"]],decls:54,vars:12,consts:[["translucent","true"],["slot","start"],["defaultHref","/cliente/categoria"],["collapse","true","slot","end"],[3,"click"],["slot","icon-only","name","locate-outline"],["collapse","condense"],["size","large"],["slot","end"],[2,"width","100%","height","350px"],[1,"container"],["class","img-center","src","https://res.cloudinary.com/devgea-s-a/image/upload/v1594950613/Finca%20Cienaguilla/mkdr6jfwkclzdzubuuwb.png",4,"ngIf"],["class","img-center",3,"src",4,"ngIf"],[3,"ngSubmit"],["position","floating"],["name","document-outline"],["type","text","name","nit","required","true","maxlength","255",3,"ngModel","ngModelChange"],["name","map-outline"],["placeholder","Selecciona una direcci\xf3n","name","direccion",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["name","cart-outline"],["placeholder","Selecciona un tipo de pago","name","tipoOrden",3,"ngModel","ngModelChange"],[4,"ngIf"],["name","chatbubble-ellipses-outline"],["type","text","rows","6","cols","20","name","observaciones","required","true","maxlength","255",3,"ngModel","ngModelChange"],["name","cash-outline"],["type","number","name","total","required","true","maxlength","10","disabled","",3,"ngModel","ngModelChange"],["color","primary","expand","block","type","button",3,"click",4,"ngIf"],["color","primary","expand","block","type","submit",3,"disabled"],["name","save-outline","slot","start"],["src","https://res.cloudinary.com/devgea-s-a/image/upload/v1594950613/Finca%20Cienaguilla/mkdr6jfwkclzdzubuuwb.png",1,"img-center"],[1,"img-center",3,"src"],[3,"value"],["name","document-text-outline"],["type","number","name","boleta","required","true","maxlength","10",3,"ngModel","ngModelChange"],["color","primary","expand","block","type","button",3,"click"],["name","images-outline","slot","start"]],template:function(e,t){1&e&&(c.Mb(0,"ion-header",0),c.Mb(1,"ion-toolbar"),c.Mb(2,"ion-buttons",1),c.Kb(3,"ion-back-button",2),c.Lb(),c.Mb(4,"ion-title"),c.ic(5,"Compra"),c.Lb(),c.Mb(6,"ion-buttons",3),c.Mb(7,"ion-button",4),c.Ub("click",(function(){return t.goToRoute("direccion")})),c.Kb(8,"ion-icon",5),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Mb(9,"ion-content"),c.Mb(10,"ion-header",6),c.Mb(11,"ion-toolbar"),c.Mb(12,"ion-title",7),c.ic(13,"Compra"),c.Lb(),c.Mb(14,"ion-buttons",8),c.Mb(15,"ion-button",4),c.Ub("click",(function(){return t.goToRoute("direccion")})),c.Kb(16,"ion-icon",5),c.Lb(),c.Lb(),c.Lb(),c.Lb(),c.Mb(17,"div",9),c.Mb(18,"div",10),c.hc(19,g,1,0,"img",11),c.hc(20,f,1,1,"img",12),c.Lb(),c.Lb(),c.Mb(21,"form",13),c.Ub("ngSubmit",(function(){return t.saveChanges()})),c.Mb(22,"ion-item"),c.Mb(23,"ion-label",14),c.Kb(24,"ion-icon",15),c.ic(25," No. NIT: "),c.Lb(),c.Mb(26,"ion-input",16),c.Ub("ngModelChange",(function(e){return t.data.nit=e})),c.Lb(),c.Lb(),c.Mb(27,"ion-item"),c.Mb(28,"ion-label"),c.Kb(29,"ion-icon",17),c.ic(30," Direcci\xf3n: "),c.Lb(),c.Mb(31,"ion-select",18),c.Ub("ngModelChange",(function(e){return t.data.direccion=e})),c.hc(32,p,2,2,"ion-select-option",19),c.Lb(),c.Lb(),c.Mb(33,"ion-item"),c.Mb(34,"ion-label"),c.Kb(35,"ion-icon",20),c.ic(36," Tipo de Pago: "),c.Lb(),c.Mb(37,"ion-select",21),c.Ub("ngModelChange",(function(e){return t.data.tipoOrden=e})),c.hc(38,h,2,2,"ion-select-option",19),c.Lb(),c.Lb(),c.hc(39,m,5,1,"ion-item",22),c.Mb(40,"ion-item"),c.Mb(41,"ion-label",14),c.Kb(42,"ion-icon",23),c.ic(43," Observaciones: "),c.Lb(),c.Mb(44,"ion-textarea",24),c.Ub("ngModelChange",(function(e){return t.data.observaciones=e})),c.Lb(),c.Lb(),c.Mb(45,"ion-item"),c.Mb(46,"ion-label",14),c.Kb(47,"ion-icon",25),c.ic(48," Total: "),c.Lb(),c.Mb(49,"ion-input",26),c.Ub("ngModelChange",(function(e){return t.data.total=e})),c.Lb(),c.Lb(),c.hc(50,v,3,0,"ion-button",27),c.Mb(51,"ion-button",28),c.Kb(52,"ion-icon",29),c.ic(53," Guardar Cambios "),c.Lb(),c.Lb(),c.Lb()),2&e&&(c.zb(19),c.bc("ngIf",!t.strImage),c.zb(1),c.bc("ngIf",t.strImage),c.zb(6),c.bc("ngModel",t.data.nit),c.zb(5),c.bc("ngModel",t.data.direccion),c.zb(1),c.bc("ngForOf",t.direcciones),c.zb(5),c.bc("ngModel",t.data.tipoOrden),c.zb(1),c.bc("ngForOf",t.tipoDePago),c.zb(1),c.bc("ngIf",2==t.data.tipoOrden),c.zb(5),c.bc("ngModel",t.data.observaciones),c.zb(5),c.bc("ngModel",t.data.total),c.zb(1),c.bc("ngIf",2==t.data.tipoOrden),c.zb(1),c.bc("disabled",t.disabledBtn))},directives:[a.t,a.Q,a.h,a.e,a.f,a.P,a.g,a.u,a.o,i.i,o.j,o.f,o.g,a.w,a.y,a.v,a.ab,o.i,o.b,o.e,o.h,a.G,a.Z,i.h,a.O,a.X,a.H],styles:["ion-content[_ngcontent-%COMP%]{--padding-start:15px;--padding-end:15px}"]}),y)}],T=((L=function e(){_classCallCheck(this,e)}).\u0275mod=c.Hb({type:L}),L.\u0275inj=c.Gb({factory:function(e){return new(e||L)},imports:[[r.i.forChild(C)],r.i]}),L),k=((M=function e(){_classCallCheck(this,e)}).\u0275mod=c.Hb({type:M}),M.\u0275inj=c.Gb({factory:function(e){return new(e||M)},imports:[[i.b,o.a,a.R,T]]}),M)}}]);