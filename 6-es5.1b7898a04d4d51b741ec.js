function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{O3Fr:function(e,t,n){"use strict";n.r(t),n.d(t,"DescuentoPageModule",(function(){return O}));var i,o=n("ofXK"),a=n("3Pt+"),c=n("TEn/"),r=n("tyNb"),s=n("mrSG"),l=n("fXoL"),u=n("J/xi"),d=n("tk/3"),b=n("z6cu"),h=n("JIr8"),p=n("BK6h"),g=((i=function(){function e(t){_classCallCheck(this,e),this.http=t,this.basePath=p.a.path,this.httpOptions={headers:new d.c({"Content-Type":"application/json"})}}return _createClass(e,[{key:"handleError",value:function(e){return e.error instanceof ErrorEvent?console.error("Un error ha ocurrido:",e.error.message):console.error("Backend returned code ".concat(e.status,", body was: "),e.error),Object(b.a)(e)}},{key:"getAll",value:function(){return this.http.get(this.basePath+"descuentos",this.httpOptions).pipe(Object(h.a)(this.handleError))}},{key:"getSingle",value:function(e){return this.http.get("".concat(this.basePath,"descuentos/").concat(e)).pipe(Object(h.a)(this.handleError))}},{key:"create",value:function(e){return this.http.post(this.basePath+"descuentos",e,this.httpOptions).pipe(Object(h.a)(this.handleError))}},{key:"update",value:function(e){return this.http.put("".concat(this.basePath,"descuentos/").concat(e.id),e,this.httpOptions).pipe(Object(h.a)(this.handleError))}},{key:"delete",value:function(e){return this.http.delete("".concat(this.basePath,"descuentos/").concat(e),this.httpOptions).pipe(Object(h.a)(this.handleError))}}]),e}()).\u0275fac=function(e){return new(e||i)(l.Qb(d.a))},i.\u0275prov=l.Fb({token:i,factory:i.\u0275fac,providedIn:"root"}),i);function f(e,t){1&e&&l.Kb(0,"img",21)}function m(e,t){if(1&e&&l.Kb(0,"img",22),2&e){var n=l.Wb();l.cc("src",n.strImage,l.fc)}}var v,M=((v=function(){function e(t,n,i,o){_classCallCheck(this,e),this.modalController=t,this.notificacionService=n,this.descuentoService=i,this.navParams=o,this.disabledBtn=!1,this.data={id:"",codigo:"",descripcion:"",cantidad:0,producto:!1,visualizacion:!1}}return _createClass(e,[{key:"ngOnInit",value:function(){this.data.id=this.navParams.get("value"),this.data.id?this.getSingle(+this.data.id):this.data.codigo=this.generate(10)}},{key:"closeModal",value:function(e){this.modalController.dismiss(e)}},{key:"getSingle",value:function(e){var t=this;this.descuentoService.getSingle(e).subscribe((function(e){t.data=e,t.strImage=e.imagen}),(function(e){}))}},{key:"saveChanges",value:function(){this.validarCampos()&&(this.disabledBtn=!0,this.data.id?this.update():this.create())}},{key:"validarCampos",value:function(){if(this.data.codigo){if(this.data.descripcion)return!0;this.notificacionService.presentToast("La descripci\xf3n es requerida.")}else this.notificacionService.presentToast("El codigo es requerido.");return!1}},{key:"create",value:function(){var e=this;this.descuentoService.create(this.data).subscribe((function(t){e.closeModal(t),e.notificacionService.presentAlert("Descuento Agregado","El contacto se ha registrado exitosamente.")}),(function(t){e.disabledBtn=!1,e.notificacionService.presentToast("Lo sentimos, ha ocurrido un error intenta m\xe1s tarde.")}))}},{key:"update",value:function(){var e=this;this.descuentoService.update(this.data).subscribe((function(t){e.closeModal(t),e.notificacionService.presentAlert("Descuento Actualizado","El contacto se ha actualizado exitosamente.")}),(function(t){e.disabledBtn=!1,e.notificacionService.presentToast("Lo sentimos, ha ocurrido un error intenta m\xe1s tarde.")}))}},{key:"generate",value:function(e){var t,n="1234567890abcdefghijkmnpqrtuvwxyz0123456789ABCDEFGHIJKLMNPQRTUVWXYZ123467890",i="";for(t=0;t<e;t++)i+=n.charAt(Math.floor(Math.random()*n.length));return i}}]),e}()).\u0275fac=function(e){return new(e||v)(l.Jb(c.U),l.Jb(u.a),l.Jb(g),l.Jb(c.W))},v.\u0275cmp=l.Db({type:v,selectors:[["app-modal-descuento"]],decls:43,vars:9,consts:[["translucent","true"],["slot","end"],[3,"click"],["slot","icon-only","name","close-circle-outline"],[3,"fullscreen"],["collapse","condense"],["size","large"],[2,"width","100%","height","350px"],[1,"container"],["class","img-center","src","https://res.cloudinary.com/devgea-s-a/image/upload/v1594950613/Finca%20Cienaguilla/mkdr6jfwkclzdzubuuwb.png",4,"ngIf"],["class","img-center",3,"src",4,"ngIf"],[3,"ngSubmit"],["position","floating"],["name","person-outline"],["type","text","name","codigo","required","true","maxlength","255",3,"ngModel","ngModelChange"],["type","text","rows","6","cols","20","name","descripcion","required","true","maxlength","255",3,"ngModel","ngModelChange"],["type","text","name","cantidad","required","true","maxlength","11",3,"ngModel","ngModelChange"],["slot","end","name","producto",3,"ngModel","ngModelChange"],["slot","end","name","visualizacion",3,"ngModel","ngModelChange"],["color","primary","expand","block","type","submit",3,"disabled"],["name","save-outline","slot","start"],["src","https://res.cloudinary.com/devgea-s-a/image/upload/v1594950613/Finca%20Cienaguilla/mkdr6jfwkclzdzubuuwb.png",1,"img-center"],[1,"img-center",3,"src"]],template:function(e,t){1&e&&(l.Mb(0,"ion-header",0),l.Mb(1,"ion-toolbar"),l.Mb(2,"ion-title"),l.ic(3,"Descuentos"),l.Lb(),l.Mb(4,"ion-buttons",1),l.Mb(5,"ion-button",2),l.Ub("click",(function(){return t.closeModal()})),l.Kb(6,"ion-icon",3),l.Lb(),l.Lb(),l.Lb(),l.Lb(),l.Mb(7,"ion-content",4),l.Mb(8,"ion-header",5),l.Mb(9,"ion-toolbar"),l.Mb(10,"ion-title",6),l.ic(11,"Descuentos"),l.Lb(),l.Lb(),l.Lb(),l.Mb(12,"div",7),l.Mb(13,"div",8),l.hc(14,f,1,0,"img",9),l.hc(15,m,1,1,"img",10),l.Lb(),l.Lb(),l.Mb(16,"form",11),l.Ub("ngSubmit",(function(){return t.saveChanges()})),l.Mb(17,"ion-item"),l.Mb(18,"ion-label",12),l.Kb(19,"ion-icon",13),l.ic(20," C\xf3digo: "),l.Lb(),l.Mb(21,"ion-input",14),l.Ub("ngModelChange",(function(e){return t.data.codigo=e})),l.Lb(),l.Lb(),l.Mb(22,"ion-item"),l.Mb(23,"ion-label",12),l.Kb(24,"ion-icon",13),l.ic(25," Descripcion: "),l.Lb(),l.Mb(26,"ion-textarea",15),l.Ub("ngModelChange",(function(e){return t.data.descripcion=e})),l.Lb(),l.Lb(),l.Mb(27,"ion-item"),l.Mb(28,"ion-label",12),l.Kb(29,"ion-icon",13),l.ic(30," Cantidad: "),l.Lb(),l.Mb(31,"ion-input",16),l.Ub("ngModelChange",(function(e){return t.data.cantidad=e})),l.Lb(),l.Lb(),l.Mb(32,"ion-item"),l.Mb(33,"ion-label"),l.ic(34,"\xbfTodos los productos?"),l.Lb(),l.Mb(35,"ion-checkbox",17),l.Ub("ngModelChange",(function(e){return t.data.producto=e})),l.Lb(),l.Lb(),l.Mb(36,"ion-item"),l.Mb(37,"ion-label"),l.ic(38,"Visualizaci\xf3n"),l.Lb(),l.Mb(39,"ion-checkbox",18),l.Ub("ngModelChange",(function(e){return t.data.visualizacion=e})),l.Lb(),l.Lb(),l.Mb(40,"ion-button",19),l.Kb(41,"ion-icon",20),l.ic(42," Guardar Cambios "),l.Lb(),l.Lb(),l.Lb()),2&e&&(l.zb(7),l.bc("fullscreen",!0),l.zb(7),l.bc("ngIf",!t.strImage),l.zb(1),l.bc("ngIf",t.strImage),l.zb(6),l.bc("ngModel",t.data.codigo),l.zb(5),l.bc("ngModel",t.data.descripcion),l.zb(5),l.bc("ngModel",t.data.cantidad),l.zb(4),l.bc("ngModel",t.data.producto),l.zb(4),l.bc("ngModel",t.data.visualizacion),l.zb(1),l.bc("disabled",t.disabledBtn))},directives:[c.t,c.Q,c.P,c.h,c.g,c.u,c.o,o.i,a.j,a.f,a.g,c.w,c.y,c.v,c.ab,a.i,a.b,a.e,a.h,c.O,c.m,c.c],styles:["ion-content[_ngcontent-%COMP%]{--padding-start:15px;--padding-end:15px}"]}),v);function L(e,t){if(1&e&&(l.Mb(0,"div",12),l.Kb(1,"img",13),l.Mb(2,"div",14),l.Mb(3,"div",15),l.Mb(4,"a"),l.Mb(5,"h5"),l.ic(6),l.Lb(),l.Lb(),l.Kb(7,"div",16),l.Mb(8,"p"),l.ic(9),l.Lb(),l.Lb(),l.Lb(),l.Lb()),2&e){var n=l.Wb().$implicit;l.zb(6),l.jc(n.codigo),l.zb(3),l.kc("",n.descripcion," ")}}function C(e,t){if(1&e){var n=l.Nb();l.Mb(0,"div",17),l.Ub("click",(function(){l.ec(n);var e=l.Wb().$implicit;return l.Wb().getDetalle(e)})),l.Kb(1,"img",13),l.Mb(2,"div",14),l.Mb(3,"div",15),l.Mb(4,"a"),l.Mb(5,"h5"),l.ic(6),l.Lb(),l.Lb(),l.Kb(7,"div",16),l.Mb(8,"p"),l.ic(9),l.Lb(),l.Lb(),l.Lb(),l.Lb()}if(2&e){var i=l.Wb().$implicit;l.zb(6),l.jc(i.codigo),l.zb(3),l.kc("",i.descripcion," ")}}function k(e,t){if(1&e&&(l.Mb(0,"div"),l.hc(1,L,10,2,"div",10),l.hc(2,C,10,2,"div",11),l.Lb()),2&e){var n=t.$implicit,i=l.Wb();l.zb(1),l.bc("ngIf",1==n.visualizacion&&"Administrador"!=i.administratorApp),l.zb(1),l.bc("ngIf","Administrador"==i.administratorApp)}}function y(e,t){if(1&e){var n=l.Nb();l.Mb(0,"ion-fab",18),l.Mb(1,"ion-fab-button",2),l.Ub("click",(function(){return l.ec(n),l.Wb().presentModal()})),l.Kb(2,"ion-icon",19),l.Lb(),l.Lb()}}var x,z,w,S=[{path:"",component:(x=function(){function e(t,n,i,o,a,c,r,s,l){var u=this;_classCallCheck(this,e),this.loadingController=t,this.notificacionService=n,this.descuentoService=i,this.alertController=o,this.router=a,this.modalController=c,this.actionSheetController=r,this.activatedRoute=s,this.location=l,this.getAll=function(){u.notificacionService.presentLoading("Cargando..."),u.descuentoService.getAll().subscribe((function(e){console.log(e),u.data=[],u.data=e,u.notificacionService.dismissLoading()}),(function(e){u.data=[],u.notificacionService.dismissLoading()}))}}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"ionViewDidEnter",value:function(){this.administratorApp=localStorage.getItem("currentType"),this.getAll()}},{key:"goToRoute",value:function(e){this.router.navigate([""+e])}},{key:"getDetalle",value:function(e){this.presentActionSheet(e)}},{key:"presentActionSheet",value:function(e){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,i=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.actionSheetController.create({header:"Descuentos",cssClass:"my-custom-class",buttons:[{text:"Actualizar",icon:"create-outline",handler:function(){i.presentModal(e.id)}},{text:"Eliminar",role:"destructive",icon:"trash-outline",handler:function(){i.presentAlert(e.id)}},{text:"Cancelar",icon:"close",role:"cancel",handler:function(){console.log("Cancel clicked")}}]});case 2:return n=t.sent,t.next=5,n.present();case 5:case"end":return t.stop()}}),t,this)})))}},{key:"presentModal",value:function(e){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,i=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.modalController.create({component:M,componentProps:{value:e,categoria:this.parameter}});case 2:return(n=t.sent).onDidDismiss().then((function(e){e.data&&i.getAll()})),t.next=6,n.present();case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t,this)})))}},{key:"presentAlert",value:function(e){return Object(s.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,i=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.alertController.create({header:"Eliminar",message:"\xbfDeseas eliminar el descuento?",cssClass:"my-custom-class",buttons:[{text:"Cancelar",role:"cancel",cssClass:"secondary",handler:function(e){}},{text:"Aceptar",handler:function(){i.delete(e)}}]});case 2:return n=t.sent,t.next=5,n.present();case 5:case"end":return t.stop()}}),t,this)})))}},{key:"delete",value:function(e){var t=this;this.descuentoService.delete(e).subscribe((function(e){t.notificacionService.presentAlert("Descuento Eliminado","El descuento fue eliminado exitosamente."),t.getAll()}),(function(e){console}))}}]),e}(),x.\u0275fac=function(e){return new(e||x)(l.Jb(c.T),l.Jb(u.a),l.Jb(g),l.Jb(c.b),l.Jb(r.g),l.Jb(c.U),l.Jb(c.a),l.Jb(r.a),l.Jb(o.f))},x.\u0275cmp=l.Db({type:x,selectors:[["app-descuento"]],decls:17,vars:3,consts:[["translucent","true"],["collapse","true","slot","end"],[3,"click"],["slot","icon-only","name","cart-outline"],[3,"fullscreen"],["collapse","condense"],["size","large"],["slot","end"],[4,"ngFor","ngForOf"],["vertical","bottom","horizontal","end","slot","fixed",4,"ngIf"],["class","categories_post",4,"ngIf"],["class","categories_post",3,"click",4,"ngIf"],[1,"categories_post"],["src","https://res.cloudinary.com/devgea-s-a/image/upload/v1595208129/Finca%20Cienaguilla/hrgsj3qxu6wfbvm0qwuy.png","alt","post",1,"card-img","rounded-0"],[1,"categories_details"],[1,"categories_text"],[1,"border_line"],[1,"categories_post",3,"click"],["vertical","bottom","horizontal","end","slot","fixed"],["name","add-outline"]],template:function(e,t){1&e&&(l.Mb(0,"ion-header",0),l.Mb(1,"ion-toolbar"),l.Mb(2,"ion-title"),l.ic(3,"Descuentos"),l.Lb(),l.Mb(4,"ion-buttons",1),l.Mb(5,"ion-button",2),l.Ub("click",(function(){return t.goToRoute("carrito")})),l.Kb(6,"ion-icon",3),l.Lb(),l.Lb(),l.Lb(),l.Lb(),l.Mb(7,"ion-content",4),l.Mb(8,"ion-header",5),l.Mb(9,"ion-toolbar"),l.Mb(10,"ion-title",6),l.ic(11,"Descuentos"),l.Lb(),l.Mb(12,"ion-buttons",7),l.Mb(13,"ion-button",2),l.Ub("click",(function(){return t.goToRoute("carrito")})),l.Kb(14,"ion-icon",3),l.Lb(),l.Lb(),l.Lb(),l.Lb(),l.hc(15,k,3,2,"div",8),l.hc(16,y,3,0,"ion-fab",9),l.Lb()),2&e&&(l.zb(7),l.bc("fullscreen",!0),l.zb(8),l.bc("ngForOf",t.data),l.zb(1),l.bc("ngIf","Administrador"==t.administratorApp))},directives:[c.t,c.Q,c.P,c.h,c.g,c.u,c.o,o.h,o.i,c.q,c.r],styles:["ion-content[_ngcontent-%COMP%]{--padding-start:15px;--padding-end:15px}.categories_post[_ngcontent-%COMP%]{margin:3%!important}"]}),x)}],A=((w=function e(){_classCallCheck(this,e)}).\u0275mod=l.Hb({type:w}),w.\u0275inj=l.Gb({factory:function(e){return new(e||w)},imports:[[r.i.forChild(S)],r.i]}),w),O=((z=function e(){_classCallCheck(this,e)}).\u0275mod=l.Hb({type:z}),z.\u0275inj=l.Gb({factory:function(e){return new(e||z)},imports:[[o.b,a.a,c.R,A]]}),z)}}]);